<!DOCTYPE html>



  


<html class="theme-next mist use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Hexo, NexT" />










<meta name="description" content="只写简单和中等题就是在摸鱼罢。">
<meta property="og:type" content="article">
<meta property="og:title" content="Leetcode Hard难度 题解">
<meta property="og:url" content="http://yoursite.com/2019/04/26/leetcode-hard/index.html">
<meta property="og:site_name" content="zqy1018的博客">
<meta property="og:description" content="只写简单和中等题就是在摸鱼罢。">
<meta property="og:locale" content="zh-Hans">
<meta property="og:updated_time" content="2019-08-19T16:10:38.808Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Leetcode Hard难度 题解">
<meta name="twitter:description" content="只写简单和中等题就是在摸鱼罢。">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Mist',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/2019/04/26/leetcode-hard/"/>





  <title>Leetcode Hard难度 题解 | zqy1018的博客</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">zqy1018的博客</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            关于
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      

      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br />
            
            搜索
          </a>
        </li>
      
    </ul>
  

  
    <div class="site-search">
      
  <div class="popup search-popup local-search-popup">
  <div class="local-search-header clearfix">
    <span class="search-icon">
      <i class="fa fa-search"></i>
    </span>
    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
    <div class="local-search-input-wrapper">
      <input autocomplete="off"
             placeholder="搜索..." spellcheck="false"
             type="text" id="local-search-input">
    </div>
  </div>
  <div id="local-search-result"></div>
</div>



    </div>
  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/04/26/leetcode-hard/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="zqy">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="zqy1018的博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">Leetcode Hard难度 题解</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-04-26T21:04:46+08:00">
                2019-04-26
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Leetcode/" itemprop="url" rel="index">
                    <span itemprop="name">Leetcode</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2019/04/26/leetcode-hard/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count valine-comment-count" data-xid="/2019/04/26/leetcode-hard/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          
             <span id="/2019/04/26/leetcode-hard/" class="leancloud_visitors" data-flag-title="Leetcode Hard难度 题解">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">阅读次数&#58;</span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计&#58;</span>
                
                <span title="字数统计">
                  14,351 字
                </span>
              

              

              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <p>只写简单和中等题就是在摸鱼罢。<br><a id="more"></a></p>
<h1 id="4"><a href="#4" class="headerlink" title="4"></a>4</h1><p>真是一个不错的题。<br>考虑二分。可以发现，如果两个序列归并，那么第一个中位数之前会有 $tot=\frac{n+m-1}{2}$ 个数。考虑把这些数的来源，设第一个序列的前 $p$ 个数，和第二个序列的前 $tot-p$ 个数构成了这些数。对 $p$ 二分，设当前值为 $mid$ ，判定方法是如果第一个序列下标为 $mid$ 的数小于第二个序列下标为 $tot-mid-1$ 的数，则说明 $p$ 太小。<br>边界情况很多，包括二分的上下限和答案的位置，需要多次特判。<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">double</span> <span class="title">findMedianSortedArrays</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&amp; nums1, <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&amp; nums2)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> n = nums1.size(), m = nums2.size();</span><br><span class="line">        <span class="keyword">if</span>(!n &amp;&amp; !m) <span class="keyword">return</span> <span class="number">0.0</span>;</span><br><span class="line">        <span class="keyword">int</span> pos = (n + m - <span class="number">1</span>) &gt;&gt; <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">int</span> l = max(<span class="number">0</span>, pos - m), r = min(pos, n); <span class="comment">// 取好答案的上下界</span></span><br><span class="line">        <span class="keyword">while</span>(l &lt; r)&#123;</span><br><span class="line">            <span class="keyword">int</span> mid = (l + r) &gt;&gt; <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">if</span>(nums1[mid] &lt; nums2[pos - mid - <span class="number">1</span>])</span><br><span class="line">                l = mid + <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">else</span> r = mid;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>((n + m) &amp; <span class="number">1</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span>(l &gt;= n) <span class="keyword">return</span> nums2[pos - l];</span><br><span class="line">            <span class="keyword">if</span>(pos - l &gt;= m) <span class="keyword">return</span> nums1[l];</span><br><span class="line">            <span class="keyword">if</span>(nums1[l] &lt; nums2[pos - l]) <span class="keyword">return</span> nums1[l];</span><br><span class="line">            <span class="keyword">return</span> nums2[pos - l];</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="keyword">if</span>(l &gt;= n) <span class="keyword">return</span> <span class="number">0.5</span> * (nums2[pos - l] + nums2[pos - l + <span class="number">1</span>]);</span><br><span class="line">            <span class="keyword">if</span>(pos - l &gt;= m) <span class="keyword">return</span> <span class="number">0.5</span> * (nums1[l] + nums1[l + <span class="number">1</span>]);</span><br><span class="line">            <span class="keyword">if</span>(pos - l + <span class="number">1</span> &lt; m &amp;&amp; nums1[l] &gt; nums2[pos - l + <span class="number">1</span>])</span><br><span class="line">                <span class="keyword">return</span> <span class="number">0.5</span> * (nums2[pos - l] + nums2[pos - l + <span class="number">1</span>]);</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span>(l + <span class="number">1</span> &lt; n &amp;&amp; nums2[pos - l] &gt; nums1[l + <span class="number">1</span>])</span><br><span class="line">                <span class="keyword">return</span> <span class="number">0.5</span> * (nums1[l] + nums1[l + <span class="number">1</span>]);</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">return</span> <span class="number">0.5</span> * (nums1[l] + nums2[pos - l]);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></p>
<h1 id="10"><a href="#10" class="headerlink" title="10"></a>10</h1><p>有点神奇的 DP。<br>首先这个题在某种意义上有点复杂，如果能够把诸如 <code>x*</code> 的字符匹配形式换成单个字符的话，代码会简便一些。下面为了方便起见，认为形式 <code>x*</code> 是一个字符。<br>考虑 s 串的前 $i$ 个字符去和 $p$ 的前 $j$ 个字符匹配，成功与否由 $f[i][j]$ 指示。现在匹配到了 $s[i]$ 和 $p[j]$：</p>
<ol>
<li>如果 $p[j]$ 是字母，那么答案仅仅是 $f[i-1][j-1]$ 和 $s[i]=p[j]$ 的逻辑与。</li>
<li>如果 $p[j]$ 是 <code>.</code>，那么答案仅仅是 $f[i-1][j-1]$。</li>
<li>如果 $p[j]$ 具有 <code>x*</code> 形式，那么答案可能来自 $f[i][j-1]$（表明该星号没有匹配到任何一个字符）：<ol>
<li>如果 $p[j]$ 是 <code>.*</code>，那么答案还可以来自 $f[i-1][j-1]$ 和 $f[i-1][j]$。前者表明开始匹配，后者表明沿着之前利用星号匹配的部分继续匹配。</li>
<li>否则，根据 $x=s[i]$ 与否判断：<ol>
<li>是，那么答案还可以来自 $f[i-1][j-1]$，表明开始匹配；如果 $s[i-1]$ 和 $s[i]$ 相同，那么答案还可以来自 $f[i-1][j]$，表明沿着之前利用星号匹配的部分继续匹配。</li>
<li>否，那么不能匹配任何字符。</li>
</ol>
</li>
</ol>
</li>
</ol>
<p>一开始有一个初始化：$f[0][0]=\text{true}$。但是注意，星号可以匹配空串，所以一开始还要检查如果 $p$ 以星号开头，那么匹配空串是成功的。<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">bool</span> <span class="title">isMatch</span><span class="params">(<span class="built_in">string</span> s, <span class="built_in">string</span> p)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> n = s.length(), rm = p.length(), m = rm;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">char</span> c: p) <span class="keyword">if</span> (c == <span class="string">'*'</span>) --m;</span><br><span class="line">        <span class="built_in">vector</span>&lt;<span class="built_in">vector</span>&lt;<span class="keyword">bool</span>&gt; &gt; f(n + <span class="number">1</span>, <span class="built_in">vector</span>&lt;<span class="keyword">bool</span>&gt;(m + <span class="number">1</span>, <span class="literal">false</span>));</span><br><span class="line">        f[<span class="number">0</span>][<span class="number">0</span>] = <span class="literal">true</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">2</span>; j &lt;= rm; j += <span class="number">2</span>)&#123;</span><br><span class="line">            <span class="keyword">if</span> (p[j - <span class="number">1</span>] != <span class="string">'*'</span>) <span class="keyword">break</span>;</span><br><span class="line">            f[<span class="number">0</span>][j &gt;&gt; <span class="number">1</span>] = <span class="literal">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; ++i)&#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">1</span>, j_ = <span class="number">1</span>; j &lt;= rm; ++j)&#123;</span><br><span class="line">                <span class="keyword">if</span> (j &lt; rm &amp;&amp; p[j] == <span class="string">'*'</span>) <span class="keyword">continue</span>;</span><br><span class="line">                <span class="keyword">if</span> (<span class="built_in">isalpha</span>(p[j - <span class="number">1</span>]))&#123;</span><br><span class="line">                    f[i][j_] = (f[i - <span class="number">1</span>][j_ - <span class="number">1</span>] &amp;&amp; s[i - <span class="number">1</span>] == p[j - <span class="number">1</span>]);</span><br><span class="line">                &#125;<span class="keyword">else</span> <span class="keyword">if</span> (p[j - <span class="number">1</span>] == <span class="string">'.'</span>)&#123;</span><br><span class="line">                    f[i][j_] = f[i - <span class="number">1</span>][j_ - <span class="number">1</span>];</span><br><span class="line">                &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                    <span class="keyword">if</span> (p[j - <span class="number">2</span>] != <span class="string">'.'</span> &amp;&amp; p[j - <span class="number">2</span>] == s[i - <span class="number">1</span>])&#123;</span><br><span class="line">                        f[i][j_] = f[i][j_ - <span class="number">1</span>] || f[i - <span class="number">1</span>][j_ - <span class="number">1</span>];</span><br><span class="line">                        <span class="keyword">if</span> (i &gt;= <span class="number">2</span> &amp;&amp; s[i - <span class="number">1</span>] == s[i - <span class="number">2</span>])</span><br><span class="line">                            f[i][j_] = f[i][j_] || f[i - <span class="number">1</span>][j_];</span><br><span class="line">                    &#125;<span class="keyword">else</span> <span class="keyword">if</span> (p[j - <span class="number">2</span>] == <span class="string">'.'</span>) &#123;</span><br><span class="line">                        f[i][j_] = f[i][j_ - <span class="number">1</span>] || f[i - <span class="number">1</span>][j_ - <span class="number">1</span>] || f[i - <span class="number">1</span>][j_];</span><br><span class="line">                    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                        f[i][j_] = f[i][j_ - <span class="number">1</span>];</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">                ++j_;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> f[n][m];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></p>
<h1 id="23"><a href="#23" class="headerlink" title="23"></a>23</h1><p>经典问题。用一个堆可以解决。具体操作是：先把所有链表的第一个节点放进小根堆里（按照值比较），然后每一次从堆中弹出当前最小值对应的节点，向堆中放入它的下一个节点，再从它所属的链表中将其删去。<br>设总共有 $N$ 个节点，那么堆的大小不超过 $K$ ，总时间复杂度是 $O(N\log K)$ 。<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function">ListNode* <span class="title">mergeKLists</span><span class="params">(<span class="built_in">vector</span>&lt;ListNode*&gt;&amp; lists)</span> </span>&#123;</span><br><span class="line">        <span class="class"><span class="keyword">struct</span> <span class="title">P</span>&#123;</span></span><br><span class="line">            <span class="keyword">int</span> val, id;</span><br><span class="line">            P(<span class="keyword">int</span> v, <span class="keyword">int</span> i): val(v), id(i) &#123;&#125;</span><br><span class="line">        &#125;;</span><br><span class="line">        <span class="class"><span class="keyword">struct</span> <span class="title">cmp</span>&#123;</span></span><br><span class="line">            <span class="function"><span class="keyword">bool</span> <span class="title">operator</span> <span class="params">()</span><span class="params">(<span class="keyword">const</span> P &amp;p1, <span class="keyword">const</span> P &amp;p2)</span></span>&#123;</span><br><span class="line">                <span class="keyword">return</span> p1.val &gt; p2.val;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">        priority_queue&lt;P, <span class="built_in">vector</span>&lt;P&gt;, cmp&gt; pq;</span><br><span class="line">        ListNode *head = <span class="keyword">new</span> ListNode(<span class="number">0</span>), *res = head;</span><br><span class="line">        <span class="keyword">int</span> n = lists.size();</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; ++i)</span><br><span class="line">            <span class="keyword">if</span>(lists[i] != <span class="literal">NULL</span>)</span><br><span class="line">                pq.push(P(lists[i]-&gt;val, i));</span><br><span class="line">        <span class="keyword">while</span>(!pq.empty())&#123;</span><br><span class="line">            P t = pq.top();</span><br><span class="line">            pq.pop();</span><br><span class="line">            head-&gt;next = lists[t.id], head = head-&gt;next;</span><br><span class="line">            lists[t.id] = lists[t.id]-&gt;next;</span><br><span class="line">            <span class="keyword">if</span>(lists[t.id] != <span class="literal">NULL</span>)</span><br><span class="line">                pq.push(P(lists[t.id]-&gt;val, t.id)); </span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> res-&gt;next;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></p>
<p>还有一个做法就是将这些链表先两两合并，然后再两两合并，循环往复，经过 $\log_2 k$ 轮后只剩下一个链表，这就是答案。因为整个合并的过程可以看作是一棵由链表作为节点的满二叉树从底向上的构建过程，而向上一层的时间复杂度是 $O(N)$ ，总共有 $\log_2 k$ 层，所以总时间复杂度和上面是一样的。</p>
<h1 id="25"><a href="#25" class="headerlink" title="25"></a>25</h1><p>画个图就行了。注意链表不要链来链去链出环来，那就很麻烦了。<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function">ListNode* <span class="title">reverseKGroup</span><span class="params">(ListNode* head, <span class="keyword">int</span> k)</span> </span>&#123;</span><br><span class="line">        ListNode *hhd = <span class="keyword">new</span> ListNode(<span class="number">-1</span>), *res = hhd;</span><br><span class="line">        hhd-&gt;next = head;</span><br><span class="line">        <span class="keyword">while</span>(hhd-&gt;next != <span class="literal">NULL</span>)&#123;</span><br><span class="line">            <span class="keyword">int</span> cnt = <span class="number">0</span>;</span><br><span class="line">            ListNode *tt;</span><br><span class="line">            <span class="keyword">for</span> (tt = hhd; tt-&gt;next != <span class="literal">NULL</span> &amp;&amp; cnt &lt; k; tt = tt-&gt;next)</span><br><span class="line">                ++cnt;</span><br><span class="line">            <span class="keyword">if</span>(cnt &lt; k) <span class="keyword">break</span>;</span><br><span class="line">            ListNode *bef = hhd, *cur = hhd-&gt;next, *tmp, *tmp2 = tt-&gt;next;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; k; ++i)&#123;</span><br><span class="line">                tmp = cur-&gt;next;</span><br><span class="line">                cur-&gt;next = bef;</span><br><span class="line">                bef = cur, cur = tmp;</span><br><span class="line">            &#125;</span><br><span class="line">            hhd-&gt;next-&gt;next = tmp2;</span><br><span class="line">            tmp2 = hhd-&gt;next;</span><br><span class="line">            hhd-&gt;next = tt;</span><br><span class="line">            hhd = tmp2; </span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> res-&gt;next;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></p>
<h1 id="30"><a href="#30" class="headerlink" title="30"></a>30</h1><h2 id="方法一"><a href="#方法一" class="headerlink" title="方法一"></a>方法一</h2><p>经典的暴力 DFS。不需要剪枝也可以过。<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; wpos, vis;</span><br><span class="line">    <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; ans;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> pos, <span class="keyword">int</span> cur, <span class="keyword">int</span> left, <span class="built_in">string</span>&amp; s, <span class="built_in">vector</span>&lt;<span class="built_in">string</span>&gt;&amp; words)</span></span>&#123;</span><br><span class="line">        <span class="keyword">int</span> nn = words[cur].length(), id = wpos[cur];</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; nn; ++i)</span><br><span class="line">            <span class="keyword">if</span> (s[pos + i] != words[id][i])</span><br><span class="line">                <span class="keyword">return</span> ;</span><br><span class="line">        <span class="keyword">if</span> (left == <span class="number">1</span>)&#123;</span><br><span class="line">            ans.push_back(pos + nn);</span><br><span class="line">            <span class="keyword">return</span> ;</span><br><span class="line">        &#125;</span><br><span class="line">        --vis[cur];</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; wpos.size(); ++i)  &#123;</span><br><span class="line">            <span class="keyword">if</span> (vis[i] == <span class="number">0</span>) <span class="keyword">continue</span>;</span><br><span class="line">            dfs(pos + nn, i, left - <span class="number">1</span>, s, words);</span><br><span class="line">        &#125;</span><br><span class="line">        ++vis[cur];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; findSubstring(<span class="built_in">string</span> s, <span class="built_in">vector</span>&lt;<span class="built_in">string</span>&gt;&amp; words) &#123;</span><br><span class="line">        <span class="keyword">int</span> m = words.size();</span><br><span class="line">        <span class="keyword">if</span> (!m) <span class="keyword">return</span> <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;();</span><br><span class="line">        sort(words.begin(), words.end());</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; m; )&#123;</span><br><span class="line">            <span class="keyword">int</span> j = i;</span><br><span class="line">            <span class="keyword">while</span> (j &lt; m &amp;&amp; words[i] == words[j])</span><br><span class="line">                ++j;</span><br><span class="line">            wpos.push_back(i), vis.push_back(j - i);</span><br><span class="line">            i = j;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">int</span> cnt = <span class="number">0</span>, real_size = wpos.size();</span><br><span class="line">        <span class="keyword">for</span> (<span class="built_in">string</span>&amp; ss: words)</span><br><span class="line">            cnt += ss.length();</span><br><span class="line">        <span class="keyword">if</span> (cnt &gt; s.length()) <span class="keyword">return</span> <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;();</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt;= s.length() - cnt; ++i) </span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; real_size; ++j)</span><br><span class="line">                dfs(i, j, m, s, words);</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> &amp;aans: ans) aans -= cnt;</span><br><span class="line">        <span class="keyword">return</span> ans;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></p>
<p>在这里如果加上记忆化什么的反而会导致效率的下降。</p>
<h2 id="方法二"><a href="#方法二" class="headerlink" title="方法二"></a>方法二</h2><p>利用每一个单词的长度都相同的特性构建滑动窗口，这样可以避免大量的重复判定。<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; vis, ans;</span><br><span class="line">    <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; findSubstring(<span class="built_in">string</span> s, <span class="built_in">vector</span>&lt;<span class="built_in">string</span>&gt;&amp; words) &#123;</span><br><span class="line">        <span class="keyword">int</span> m = words.size();</span><br><span class="line">        <span class="keyword">if</span> (!m) <span class="keyword">return</span> <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;();</span><br><span class="line"></span><br><span class="line">        <span class="built_in">unordered_map</span>&lt;<span class="built_in">string</span>, <span class="keyword">int</span>&gt; mp;</span><br><span class="line">        sort(words.begin(), words.end());</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>, rz = <span class="number">0</span>; i &lt; m; )&#123;</span><br><span class="line">            <span class="keyword">int</span> j = i;</span><br><span class="line">            <span class="keyword">while</span> (j &lt; m &amp;&amp; words[i] == words[j])</span><br><span class="line">                ++j;</span><br><span class="line">            vis.push_back(j - i);</span><br><span class="line">            mp[words[i]] = rz, rz++;</span><br><span class="line">            i = j;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">int</span> unit_len = words[<span class="number">0</span>].length(), s_len = s.length();</span><br><span class="line">        <span class="keyword">int</span> cnt = unit_len * m;</span><br><span class="line">        <span class="keyword">if</span> (cnt &gt; s_len) <span class="keyword">return</span> <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;();</span><br><span class="line">        </span><br><span class="line">        <span class="built_in">queue</span>&lt;<span class="keyword">int</span>&gt; que;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; unit_len &amp;&amp; i + cnt &lt;= s_len; ++i)&#123;</span><br><span class="line">            <span class="keyword">int</span> left = m;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; m; ++j)&#123;</span><br><span class="line">                <span class="keyword">if</span> (mp.count(s.substr(j * unit_len + i, unit_len)))&#123;</span><br><span class="line">                    <span class="keyword">int</span> id = mp[s.substr(j * unit_len + i, unit_len)];</span><br><span class="line">                    --vis[id];</span><br><span class="line">                    <span class="keyword">if</span> (vis[id] &gt;= <span class="number">0</span>) --left;</span><br><span class="line">                    que.push(id);</span><br><span class="line">                &#125;<span class="keyword">else</span> que.push(<span class="number">-1</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">int</span> rt = i + cnt;</span><br><span class="line">            <span class="keyword">if</span> (!left) ans.push_back(i);</span><br><span class="line">            <span class="keyword">while</span> (rt + unit_len &lt;= s_len)&#123;</span><br><span class="line">                <span class="keyword">int</span> tp = que.front();</span><br><span class="line">                que.pop();</span><br><span class="line">                <span class="keyword">if</span> (tp &gt;= <span class="number">0</span>)&#123;</span><br><span class="line">                    ++vis[tp];</span><br><span class="line">                    <span class="keyword">if</span> (vis[tp] &gt;= <span class="number">1</span>) ++left; </span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">if</span> (mp.count(s.substr(rt, unit_len)))&#123;</span><br><span class="line">                    <span class="keyword">int</span> id = mp[s.substr(rt, unit_len)];</span><br><span class="line">                    --vis[id];</span><br><span class="line">                    <span class="keyword">if</span> (vis[id] &gt;= <span class="number">0</span>) --left;</span><br><span class="line">                    que.push(id);</span><br><span class="line">                &#125;<span class="keyword">else</span> que.push(<span class="number">-1</span>);</span><br><span class="line">                rt += unit_len;</span><br><span class="line">                <span class="keyword">if</span> (!left) ans.push_back(rt - cnt);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">while</span> (!que.empty()) &#123;</span><br><span class="line">                <span class="keyword">if</span> (que.front() &gt;= <span class="number">0</span>) ++vis[que.front()];</span><br><span class="line">                que.pop();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> ans;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></p>
<p>不得不说，c++ 的切片真的很鸡肋。。。</p>
<h2 id="方法三"><a href="#方法三" class="headerlink" title="方法三"></a>方法三</h2><p>构建 AC 自动机<br>（等待更新）</p>
<h1 id="32"><a href="#32" class="headerlink" title="32"></a>32</h1><h1 id="37"><a href="#37" class="headerlink" title="37"></a>37</h1><h2 id="方法一-1"><a href="#方法一-1" class="headerlink" title="方法一"></a>方法一</h2><p>采用一些简单的剪枝手法。<br>用一个三元组 $(\text{type}, \text{id}, \text{digit})$ 来表示当前的填写状态，其中 type=0 表示行，type=1 表示列，type=2 表示 3 * 3 的方格。同时用一个列表 <code>lis</code> 记录当前尚未填写的位置。<br>每次 DFS 时，填写一个空之后就在列表中剩下没有填写的位置里找出自由度最低的空格，将其作为下一个搜索对象，直到所有空格都被填写为止。<br>经实践，这种方法的效率在面对一般的数独题目还是非常好的。<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="keyword">bool</span> vis[<span class="number">3</span>][<span class="number">11</span>][<span class="number">11</span>]; <span class="comment">// 0 行 1 列 2 宫 </span></span><br><span class="line">    <span class="keyword">int</span> lis[<span class="number">81</span>][<span class="number">2</span>], len_lis;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">get</span><span class="params">(<span class="keyword">int</span> at)</span></span>&#123;</span><br><span class="line">        <span class="keyword">int</span> mini = <span class="number">99</span>, targ = <span class="number">-1</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = at + <span class="number">1</span>; i &lt; len_lis; ++i)&#123;</span><br><span class="line">            <span class="keyword">int</span> x = lis[i][<span class="number">0</span>], y = lis[i][<span class="number">1</span>], o = <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">1</span>; j &lt;= <span class="number">9</span>; ++j)&#123;</span><br><span class="line">                <span class="keyword">if</span>(vis[<span class="number">0</span>][x][j] || vis[<span class="number">1</span>][y][j] || vis[<span class="number">2</span>][(x / <span class="number">3</span>) * <span class="number">3</span> + y / <span class="number">3</span>][j])</span><br><span class="line">                    <span class="keyword">continue</span>;</span><br><span class="line">                ++o;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span>(o &lt; mini) mini = o, targ = i;</span><br><span class="line">        &#125;</span><br><span class="line">        swap(lis[targ][<span class="number">0</span>], lis[at + <span class="number">1</span>][<span class="number">0</span>]);</span><br><span class="line">        swap(lis[targ][<span class="number">1</span>], lis[at + <span class="number">1</span>][<span class="number">1</span>]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">bool</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> at, <span class="built_in">vector</span>&lt;<span class="built_in">vector</span>&lt;<span class="keyword">char</span>&gt;&gt;&amp; board)</span></span>&#123;</span><br><span class="line">        <span class="keyword">int</span> x = lis[at][<span class="number">0</span>], y = lis[at][<span class="number">1</span>];</span><br><span class="line">        <span class="keyword">int</span> block_id = (x / <span class="number">3</span>) * <span class="number">3</span> + y / <span class="number">3</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= <span class="number">9</span>; ++i)&#123;</span><br><span class="line">            <span class="keyword">if</span> (vis[<span class="number">0</span>][x][i] || vis[<span class="number">1</span>][y][i] || vis[<span class="number">2</span>][block_id][i])</span><br><span class="line">                <span class="keyword">continue</span>;</span><br><span class="line">            vis[<span class="number">0</span>][x][i] = vis[<span class="number">1</span>][y][i] = vis[<span class="number">2</span>][block_id][i] = <span class="literal">true</span>, </span><br><span class="line">            board[x][y] = i + <span class="string">'0'</span>;</span><br><span class="line">            <span class="keyword">if</span>(at &lt; len_lis - <span class="number">1</span>)&#123;</span><br><span class="line">                <span class="keyword">if</span> (at != len_lis - <span class="number">2</span>) get(at);</span><br><span class="line">                <span class="keyword">if</span> (dfs(at + <span class="number">1</span>, board))</span><br><span class="line">                    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">            &#125;<span class="keyword">else</span> <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">            vis[<span class="number">0</span>][x][i] = vis[<span class="number">1</span>][y][i] = vis[<span class="number">2</span>][block_id][i] = <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">solveSudoku</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="built_in">vector</span>&lt;<span class="keyword">char</span>&gt;&gt;&amp; board)</span> </span>&#123;</span><br><span class="line">        <span class="built_in">memset</span>(vis, <span class="number">0</span>, <span class="keyword">sizeof</span>(vis));</span><br><span class="line">        <span class="built_in">memset</span>(lis, <span class="number">0</span>, <span class="keyword">sizeof</span>(lis));</span><br><span class="line">        len_lis = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">9</span>; ++i) </span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; <span class="number">9</span>; ++j)&#123;</span><br><span class="line">                <span class="keyword">if</span> (board[i][j] == <span class="string">'.'</span>)&#123;</span><br><span class="line">                    lis[len_lis][<span class="number">0</span>] = i, lis[len_lis++][<span class="number">1</span>] = j;</span><br><span class="line">                &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">                    <span class="keyword">int</span> id = board[i][j] - <span class="string">'0'</span>;</span><br><span class="line">                    vis[<span class="number">0</span>][i][id] = vis[<span class="number">1</span>][j][id] = vis[<span class="number">2</span>][(i / <span class="number">3</span>) * <span class="number">3</span> + j / <span class="number">3</span>][id] = <span class="literal">true</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        dfs(<span class="number">0</span>, board);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></p>
<h2 id="方法二-1"><a href="#方法二-1" class="headerlink" title="方法二"></a>方法二</h2><p>DLX 算法。<br>（等待更新）<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure></p>
<h1 id="41"><a href="#41" class="headerlink" title="41"></a>41</h1><p>基本同448，物归原主方法。<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span><span class="params">(object)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">firstMissingPositive</span><span class="params">(self, nums)</span>:</span></span><br><span class="line">        <span class="string">"""</span></span><br><span class="line"><span class="string">        :type nums: List[int]</span></span><br><span class="line"><span class="string">        :rtype: int</span></span><br><span class="line"><span class="string">        """</span></span><br><span class="line">        <span class="keyword">if</span> nums == []:</span><br><span class="line">            <span class="keyword">return</span> <span class="number">1</span></span><br><span class="line">        len1 = len(nums)</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">0</span>, len1):</span><br><span class="line">            <span class="keyword">while</span> <span class="keyword">True</span>:</span><br><span class="line">                <span class="keyword">if</span> nums[i] &gt; len1 <span class="keyword">or</span> nums[i] &lt;= <span class="number">0</span> <span class="keyword">or</span> nums[nums[i] - <span class="number">1</span>] == nums[i] <span class="keyword">or</span> i == nums[i] - <span class="number">1</span>:</span><br><span class="line">                    <span class="keyword">break</span></span><br><span class="line">                nums[nums[i] - <span class="number">1</span>], nums[i] = nums[i], nums[nums[i] - <span class="number">1</span>]</span><br><span class="line">        i = <span class="number">0</span></span><br><span class="line">        <span class="keyword">while</span> i &lt; len1:</span><br><span class="line">            <span class="keyword">if</span> nums[i] != i + <span class="number">1</span>:</span><br><span class="line">                <span class="keyword">break</span></span><br><span class="line">            i += <span class="number">1</span></span><br><span class="line">        <span class="keyword">return</span> i + <span class="number">1</span></span><br></pre></td></tr></table></figure></p>
<h1 id="42"><a href="#42" class="headerlink" title="42"></a>42</h1><p>一开始写了半天单调栈，发现单调栈好像根本搞不出来。。。<br>于是放弃，写了一个前缀和后缀最大值，两个间的较小值减掉该位置的高度就是该位置水应当有的高度。这个值可能为负，所以要和0取max。<br>说白了写不出就是基础不扎实。。。<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">trap</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&amp; height)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> n = height.size();</span><br><span class="line">        <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; l(n, <span class="number">0</span>), r(n, <span class="number">0</span>);</span><br><span class="line">        <span class="keyword">int</span> ans = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; n; ++i)</span><br><span class="line">            l[i] = max(l[i - <span class="number">1</span>], height[i - <span class="number">1</span>]);</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = n - <span class="number">2</span>; i &gt;= <span class="number">0</span>; --i)</span><br><span class="line">            r[i] = max(r[i + <span class="number">1</span>], height[i + <span class="number">1</span>]), </span><br><span class="line">            ans += max(<span class="number">0</span>, min(l[i], r[i]) - height[i]);</span><br><span class="line">        <span class="keyword">return</span> ans;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></p>
<h1 id="44"><a href="#44" class="headerlink" title="44"></a>44</h1><p>第 10 题的弱化版。</p>
<h2 id="方法一-2"><a href="#方法一-2" class="headerlink" title="方法一"></a>方法一</h2><p>直接把第 10 题大部分的代码照搬就行。<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">bool</span> <span class="title">isMatch</span><span class="params">(<span class="built_in">string</span> s, <span class="built_in">string</span> p)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> n = s.length(), m = p.length();</span><br><span class="line">        <span class="built_in">vector</span>&lt;<span class="built_in">vector</span>&lt;<span class="keyword">bool</span>&gt; &gt; f(n + <span class="number">1</span>, <span class="built_in">vector</span>&lt;<span class="keyword">bool</span>&gt;(m + <span class="number">1</span>, <span class="literal">false</span>));</span><br><span class="line">        f[<span class="number">0</span>][<span class="number">0</span>] = <span class="literal">true</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">1</span>; j &lt;= m; ++j)&#123;</span><br><span class="line">            <span class="keyword">if</span> (p[j - <span class="number">1</span>] != <span class="string">'*'</span>) <span class="keyword">break</span>;</span><br><span class="line">            f[<span class="number">0</span>][j] = <span class="literal">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; ++i)&#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">1</span>; j &lt;= m; ++j)&#123;</span><br><span class="line">                <span class="keyword">if</span> (<span class="built_in">isalpha</span>(p[j - <span class="number">1</span>]))&#123;</span><br><span class="line">                    f[i][j] = (f[i - <span class="number">1</span>][j - <span class="number">1</span>] &amp;&amp; s[i - <span class="number">1</span>] == p[j - <span class="number">1</span>]);</span><br><span class="line">                &#125;<span class="keyword">else</span> <span class="keyword">if</span> (p[j - <span class="number">1</span>] == <span class="string">'?'</span>)&#123;</span><br><span class="line">                    f[i][j] = f[i - <span class="number">1</span>][j - <span class="number">1</span>];</span><br><span class="line">                &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                    f[i][j] = f[i][j - <span class="number">1</span>] || f[i - <span class="number">1</span>][j - <span class="number">1</span>] || f[i - <span class="number">1</span>][j];</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> f[n][m];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></p>
<h2 id="方法二-2"><a href="#方法二-2" class="headerlink" title="方法二"></a>方法二</h2><h1 id="45"><a href="#45" class="headerlink" title="45"></a>45</h1><p>写了一个谜一样的树状数组。。。<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; bb;</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">lowbit</span><span class="params">(<span class="keyword">int</span> x)</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> x &amp; (-x);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">update</span><span class="params">(<span class="keyword">int</span> k, <span class="keyword">int</span> r, <span class="keyword">int</span> n)</span></span>&#123;</span><br><span class="line">        <span class="keyword">while</span>(k &lt;= n)</span><br><span class="line">            bb[k] = min(bb[k], r), k += lowbit(k);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">query</span><span class="params">(<span class="keyword">int</span> k)</span></span>&#123;</span><br><span class="line">        <span class="keyword">int</span> res = <span class="number">0x3f3f3f3f</span>;</span><br><span class="line">        <span class="keyword">while</span>(k)</span><br><span class="line">            res = min(res, bb[k]), k -= lowbit(k);</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">jump</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&amp; nums)</span> </span>&#123;</span><br><span class="line">        <span class="built_in">vector</span>&lt;pair&lt;<span class="keyword">int</span>, <span class="keyword">int</span>&gt; &gt; nnums;</span><br><span class="line">        <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; f;</span><br><span class="line">        <span class="keyword">int</span> n = nums.size();</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; ++i)</span><br><span class="line">            nnums.push_back(make_pair(-i - nums[i], i));</span><br><span class="line">        sort(nnums.begin(), nnums.end());</span><br><span class="line">        f = <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;(n, <span class="number">0x3f3f3f3f</span>);</span><br><span class="line">        bb = <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;(n + <span class="number">1</span>, <span class="number">0x3f3f3f3f</span>);</span><br><span class="line">        &#123;</span><br><span class="line">            f[<span class="number">0</span>] = <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">int</span> iid = lower_bound(nnums.begin(), nnums.end(), make_pair(-nums[<span class="number">0</span>], <span class="number">0</span>)) - nnums.begin();</span><br><span class="line">            update(iid + <span class="number">1</span>, <span class="number">0</span>, n);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; n; ++i)&#123;</span><br><span class="line">            <span class="keyword">int</span> id = upper_bound(nnums.begin(), nnums.end(), make_pair(-i, n)) - nnums.begin();</span><br><span class="line">            f[i] = query(id) + <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">int</span> iid = lower_bound(nnums.begin(), nnums.end(), make_pair(-i - nums[i], i)) - nnums.begin();</span><br><span class="line">            update(iid + <span class="number">1</span>, f[i], n);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> f[n - <span class="number">1</span>];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></p>
<p>但实际上这个题没有这么麻烦，</p>
<h1 id="51"><a href="#51" class="headerlink" title="51"></a>51</h1><p>比下面这个难<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">solveNQueens</span><span class="params">(self, n: int)</span> -&gt; List[List[str]]:</span></span><br><span class="line">        <span class="string">"""</span></span><br><span class="line"><span class="string">        :type n: int</span></span><br><span class="line"><span class="string">        :rtype: int</span></span><br><span class="line"><span class="string">        """</span></span><br><span class="line">        ans = [<span class="number">0</span>] * n</span><br><span class="line">        aans = []</span><br><span class="line">        <span class="function"><span class="keyword">def</span> <span class="title">solve</span><span class="params">(n, cur_id, left, straight, right)</span>:</span></span><br><span class="line">            <span class="keyword">nonlocal</span> ans</span><br><span class="line">            <span class="keyword">if</span> cur_id == n + <span class="number">1</span>:</span><br><span class="line">                lst = [(<span class="string">"."</span> * ans[i]) + <span class="string">"Q"</span> + (<span class="string">"."</span> * (n - ans[i] - <span class="number">1</span>)) <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">0</span>, n)]</span><br><span class="line">                aans.append(lst)</span><br><span class="line">                <span class="keyword">return</span> </span><br><span class="line">            cur = ((left &amp; ((<span class="number">1</span> &lt;&lt; n) - <span class="number">1</span>)) | straight | right)</span><br><span class="line">            <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">0</span>, n):</span><br><span class="line">                j = <span class="number">1</span> &lt;&lt; i</span><br><span class="line">                <span class="keyword">if</span> cur &amp; j:</span><br><span class="line">                    <span class="keyword">continue</span></span><br><span class="line">                <span class="keyword">else</span>:</span><br><span class="line">                    ans[cur_id - <span class="number">1</span>] = i</span><br><span class="line">                    solve(n, cur_id + <span class="number">1</span>, (left | j) &lt;&lt; <span class="number">1</span>, straight | j, (right | j) &gt;&gt; <span class="number">1</span>)</span><br><span class="line">        solve(n, <span class="number">1</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>)</span><br><span class="line">        <span class="keyword">return</span> ans</span><br></pre></td></tr></table></figure></p>
<h1 id="52"><a href="#52" class="headerlink" title="52"></a>52</h1><p>这算困难吗。。。算了还是写在这<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">totalNQueens</span><span class="params">(self, n)</span>:</span></span><br><span class="line">        <span class="string">"""</span></span><br><span class="line"><span class="string">        :type n: int</span></span><br><span class="line"><span class="string">        :rtype: int</span></span><br><span class="line"><span class="string">        """</span></span><br><span class="line">        ans = <span class="number">0</span></span><br><span class="line">        <span class="function"><span class="keyword">def</span> <span class="title">solve</span><span class="params">(n, cur_id, left, straight, right)</span>:</span></span><br><span class="line">            <span class="keyword">nonlocal</span> ans</span><br><span class="line">            <span class="keyword">if</span> cur_id == n + <span class="number">1</span>:</span><br><span class="line">                ans += <span class="number">1</span></span><br><span class="line">                <span class="keyword">return</span> </span><br><span class="line">            cur = ((left &amp; ((<span class="number">1</span> &lt;&lt; n) - <span class="number">1</span>)) | straight | right)</span><br><span class="line">            <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">0</span>, n):</span><br><span class="line">                j = <span class="number">1</span> &lt;&lt; i</span><br><span class="line">                <span class="keyword">if</span> cur &amp; j:</span><br><span class="line">                    <span class="keyword">continue</span></span><br><span class="line">                <span class="keyword">else</span>:</span><br><span class="line">                    solve(n, cur_id + <span class="number">1</span>, (left | j) &lt;&lt; <span class="number">1</span>, straight | j, (right | j) &gt;&gt; <span class="number">1</span>)</span><br><span class="line">        solve(n, <span class="number">1</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>)</span><br><span class="line">        <span class="keyword">return</span> ans</span><br></pre></td></tr></table></figure></p>
<h1 id="57"><a href="#57" class="headerlink" title="57"></a>57</h1><p>两次二分，第一次找所有区间中，第一个<strong>右端点大于等于给定区间左端点</strong>的区间；第二次找所有区间中，第一个<strong>左端点大于给定区间右端点</strong>的区间。后者的前一个区间就是最后一个<strong>左端点小于等于给定区间右端点</strong>的区间。<br>然后就可以合并了。合并过程比较容易，但不知道为什么空间花费很多。<br>需要注意的是，二分的结果中有些极端情况需要特判。<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">vector</span>&lt;<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&gt; insert(<span class="built_in">vector</span>&lt;<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&gt;&amp; intervals, <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&amp; newInterval) &#123;</span><br><span class="line">        <span class="keyword">int</span> n = intervals.size();</span><br><span class="line">        <span class="keyword">int</span> l1 = <span class="number">0</span>, r1 = n;</span><br><span class="line">        <span class="keyword">while</span> (r1 &gt; l1)&#123;</span><br><span class="line">            <span class="keyword">int</span> mid = (l1 + r1) &gt;&gt; <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">if</span> (intervals[mid][<span class="number">1</span>] &lt; newInterval[<span class="number">0</span>]) l1 = mid + <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">else</span> r1 = mid;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (l1 == n)&#123;</span><br><span class="line">            intervals.push_back(newInterval);</span><br><span class="line">            <span class="keyword">return</span> intervals;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">int</span> l2 = <span class="number">0</span>, r2 = n;</span><br><span class="line">        <span class="keyword">while</span> (r2 &gt; l2)&#123;</span><br><span class="line">            <span class="keyword">int</span> mid = (l2 + r2) &gt;&gt; <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">if</span> (intervals[mid][<span class="number">0</span>] &lt;= newInterval[<span class="number">1</span>]) l2 = mid + <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">else</span> r2 = mid;</span><br><span class="line">        &#125;</span><br><span class="line">        --l2;</span><br><span class="line">        <span class="keyword">if</span> (l2 == <span class="number">-1</span>)&#123;</span><br><span class="line">            intervals.insert(intervals.begin(), newInterval);</span><br><span class="line">        &#125;<span class="keyword">else</span> <span class="keyword">if</span> (l2 == n - <span class="number">1</span>)&#123;</span><br><span class="line">            <span class="keyword">int</span> rr = max(newInterval[<span class="number">1</span>], intervals[n - <span class="number">1</span>][<span class="number">1</span>]);</span><br><span class="line">            <span class="keyword">while</span> (l1 &lt; intervals.size() - <span class="number">1</span>) intervals.pop_back();</span><br><span class="line">            intervals[l1][<span class="number">0</span>] = min(newInterval[<span class="number">0</span>], intervals[l1][<span class="number">0</span>]);</span><br><span class="line">            intervals[l1][<span class="number">1</span>] = rr;</span><br><span class="line">        &#125;<span class="keyword">else</span> &#123; </span><br><span class="line">            <span class="keyword">int</span> ll = min(newInterval[<span class="number">0</span>], intervals[l1][<span class="number">0</span>]);</span><br><span class="line">            <span class="keyword">int</span> rr = max(newInterval[<span class="number">1</span>], intervals[l2][<span class="number">1</span>]);</span><br><span class="line">            <span class="keyword">if</span> (l1 &lt;= l2)&#123;</span><br><span class="line">                intervals[l1][<span class="number">0</span>] = ll, intervals[l1][<span class="number">1</span>] = rr;</span><br><span class="line">                intervals.erase(intervals.begin() + l1 + <span class="number">1</span>, intervals.begin() + l2 + <span class="number">1</span>);</span><br><span class="line">            &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">                intervals.insert(intervals.begin() + l1, <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&#123;ll, rr&#125;);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> intervals;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></p>
<h1 id="65"><a href="#65" class="headerlink" title="65"></a>65</h1><p>偷懒<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span><span class="params">(object)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">isNumber</span><span class="params">(self, s)</span>:</span></span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            a = complex(s)</span><br><span class="line">        <span class="keyword">except</span> ValueError:</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">False</span></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">True</span></span><br></pre></td></tr></table></figure></p>
<h1 id="68"><a href="#68" class="headerlink" title="68"></a>68</h1><p>大模拟，大力分类讨论<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">vector</span>&lt;<span class="built_in">string</span>&gt; fullJustify(<span class="built_in">vector</span>&lt;<span class="built_in">string</span>&gt;&amp; words, <span class="keyword">int</span> maxWidth) &#123;</span><br><span class="line">        <span class="keyword">int</span> cur = <span class="number">0</span>, n = words.size();</span><br><span class="line">        <span class="built_in">vector</span>&lt;<span class="built_in">string</span>&gt; ans;</span><br><span class="line">        <span class="keyword">while</span>(cur &lt; n)&#123;</span><br><span class="line">            <span class="function"><span class="built_in">string</span> <span class="title">curstr</span><span class="params">(maxWidth, <span class="string">' '</span>)</span></span>;</span><br><span class="line">            <span class="keyword">int</span> j = cur + <span class="number">1</span>, cnt = words[cur].size(); </span><br><span class="line">            <span class="keyword">while</span>(j &lt; n &amp;&amp; cnt + words[j].size() + j - cur &lt;= maxWidth)</span><br><span class="line">                cnt += words[j].size(), ++j;</span><br><span class="line">            <span class="keyword">int</span> num_of_space = maxWidth - cnt;</span><br><span class="line">            <span class="keyword">if</span>(j - cur == <span class="number">1</span>)&#123;</span><br><span class="line">                <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; cnt; ++i)</span><br><span class="line">                    curstr[i] = words[cur][i];</span><br><span class="line">            &#125;<span class="keyword">else</span> <span class="keyword">if</span>(j == n)&#123;</span><br><span class="line">                <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>, len = <span class="number">0</span>; i &lt; n - cur; ++i)&#123;</span><br><span class="line">                    <span class="keyword">int</span> siz = words[cur + i].size();</span><br><span class="line">                    <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; siz; ++j)</span><br><span class="line">                        curstr[len++] = words[cur + i][j];</span><br><span class="line">                    len++;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                <span class="keyword">int</span> pos = (j - cur - <span class="number">1</span>), bas = num_of_space / pos;</span><br><span class="line">                <span class="keyword">int</span> left = num_of_space % pos;</span><br><span class="line">                <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>, len = <span class="number">0</span>; i &lt;= pos; ++i)&#123;</span><br><span class="line">                    <span class="keyword">int</span> siz = words[cur + i].size();</span><br><span class="line">                    <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; siz; ++j)</span><br><span class="line">                        curstr[len++] = words[cur + i][j];</span><br><span class="line">                    len += bas;</span><br><span class="line">                    <span class="keyword">if</span>(left) len++, left--;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            ans.push_back(curstr);</span><br><span class="line">            cur = j;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> ans;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></p>
<h1 id="72"><a href="#72" class="headerlink" title="72"></a>72</h1><p>简单DP<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">minDistance</span><span class="params">(<span class="built_in">string</span> word1, <span class="built_in">string</span> word2)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> len1 = word1.size(), len2 = word2.size();</span><br><span class="line">        <span class="keyword">if</span>(!len1 || !len2) <span class="keyword">return</span> len1 + len2;</span><br><span class="line">        <span class="built_in">vector</span>&lt;<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; &gt; f(len1 + <span class="number">1</span>, <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;(len2 + <span class="number">1</span>, <span class="number">0</span>));</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt;= len1; ++i)</span><br><span class="line">            f[i][<span class="number">0</span>] = i;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt;= len2; ++i)</span><br><span class="line">            f[<span class="number">0</span>][i] = i;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= len1; ++i)</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">1</span>; j &lt;= len2; ++j)&#123;</span><br><span class="line">                f[i][j] = min(f[i - <span class="number">1</span>][j], f[i][j - <span class="number">1</span>]) + <span class="number">1</span>;</span><br><span class="line">                <span class="keyword">if</span>(word1[i - <span class="number">1</span>] == word2[j - <span class="number">1</span>])</span><br><span class="line">                    f[i][j] = min(f[i][j], f[i - <span class="number">1</span>][j - <span class="number">1</span>]);</span><br><span class="line">                <span class="keyword">else</span></span><br><span class="line">                    f[i][j] = min(f[i][j], f[i - <span class="number">1</span>][j - <span class="number">1</span>] + <span class="number">1</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        <span class="keyword">return</span> f[len1][len2];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></p>
<h1 id="76"><a href="#76" class="headerlink" title="76"></a>76</h1><p>尺取法<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="built_in">string</span> <span class="title">minWindow</span><span class="params">(<span class="built_in">string</span> s, <span class="built_in">string</span> t)</span> </span>&#123;</span><br><span class="line">        <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; cnt(<span class="number">129</span>, <span class="number">0</span>), cnt2(<span class="number">129</span>, <span class="number">0</span>);</span><br><span class="line">        <span class="keyword">int</span> i = <span class="number">0</span>, j = <span class="number">-1</span>, n = s.size(), m = t.size();</span><br><span class="line">        <span class="keyword">int</span> tot = <span class="number">0</span>, curtot = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">int</span> ans = n + <span class="number">1</span>, posi = <span class="number">-1</span>, posj = <span class="number">-1</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> k = <span class="number">0</span>; k &lt; m; ++k)&#123;</span><br><span class="line">            cnt2[t[k]]++;</span><br><span class="line">            <span class="keyword">if</span>(cnt2[t[k]] == <span class="number">1</span>) tot++;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span>(; i &lt; n &amp;&amp; j &lt; n - <span class="number">1</span>; )&#123;</span><br><span class="line">            <span class="keyword">while</span>(j &lt; n - <span class="number">1</span> &amp;&amp; curtot &lt; tot)&#123;</span><br><span class="line">                ++j, cnt[s[j]]++;</span><br><span class="line">                <span class="keyword">if</span>(cnt[s[j]] == cnt2[s[j]]) curtot++;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span>(j == n - <span class="number">1</span> &amp;&amp; curtot &lt; tot) <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">while</span>(i &lt; j)&#123;</span><br><span class="line">                <span class="keyword">if</span>(cnt[s[i]] == cnt2[s[i]]) <span class="keyword">break</span>;</span><br><span class="line">                cnt[s[i]]--, ++i;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span>(ans &gt; j - i + <span class="number">1</span>)</span><br><span class="line">                ans = j - i + <span class="number">1</span>, posi = i, posj = j;</span><br><span class="line">            cnt[s[i]]--, --curtot, ++i;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(ans == n + <span class="number">1</span>) <span class="keyword">return</span> <span class="built_in">string</span>(<span class="string">""</span>);</span><br><span class="line">        <span class="keyword">return</span> s.substr(posi, ans);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></p>
<h1 id="84"><a href="#84" class="headerlink" title="84"></a>84</h1><p>单调栈经典题<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">largestRectangleArea</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&amp; heights)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> ans = <span class="number">0</span>;</span><br><span class="line">        heights.push_back(<span class="number">0</span>);</span><br><span class="line">        <span class="keyword">int</span> n = heights.size();</span><br><span class="line">        <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; id, w;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; ++i)&#123;</span><br><span class="line">            <span class="keyword">int</span> curw = <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">while</span>(!id.empty() &amp;&amp; heights[id.back()] &gt;= heights[i])&#123;</span><br><span class="line">                curw += w.back();</span><br><span class="line">                ans = max(ans, curw * heights[id.back()]);</span><br><span class="line">                id.pop_back(), w.pop_back();</span><br><span class="line">            &#125;</span><br><span class="line">            id.push_back(i), w.push_back(curw + <span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> ans;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></p>
<h1 id="85"><a href="#85" class="headerlink" title="85"></a>85</h1><p>扩展单调栈<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">maximalRectangle</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="built_in">vector</span>&lt;<span class="keyword">char</span>&gt;&gt;&amp; matrix)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> n = matrix.size();</span><br><span class="line">        <span class="keyword">if</span>(!n) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">int</span> m = matrix[<span class="number">0</span>].size(), ans = <span class="number">0</span>;</span><br><span class="line">        <span class="built_in">stack</span>&lt;<span class="keyword">int</span>&gt; st, w;</span><br><span class="line">        <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; h(m + <span class="number">1</span>, <span class="number">0</span>);</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>, cur = <span class="number">0</span>; i &lt; m; ++i)&#123;</span><br><span class="line">            <span class="keyword">if</span>(matrix[<span class="number">0</span>][i] == <span class="string">'1'</span>) h[i] = <span class="number">1</span>, cur++, ans = max(ans, cur);</span><br><span class="line">            <span class="keyword">else</span> cur = <span class="number">0</span>, h[i] = <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; n; ++i)&#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; m; ++j)&#123;</span><br><span class="line">                <span class="keyword">if</span>(matrix[i][j] == <span class="string">'1'</span>) h[j]++;</span><br><span class="line">                <span class="keyword">else</span> h[j] = <span class="number">0</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">while</span>(!st.empty())</span><br><span class="line">                st.pop(), w.pop();</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt;= m; ++j)&#123;</span><br><span class="line">                <span class="keyword">int</span> curw = <span class="number">0</span>;</span><br><span class="line">                <span class="keyword">while</span>(!st.empty() &amp;&amp; st.top() &gt;= h[j])</span><br><span class="line">                    curw += w.top(), ans = max(ans, curw * st.top()), st.pop(), w.pop();</span><br><span class="line">                w.push(curw + <span class="number">1</span>), st.push(h[j]);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> ans;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></p>
<h1 id="87"><a href="#87" class="headerlink" title="87"></a>87</h1><p>考虑将两个字符串切分，只有两种可能：</p>
<ol>
<li>第一个的前半部分配第二个的前半部分，第一个的后半部分配第二个的后半部分。</li>
<li>第一个的前半部分配第二个的后半部分，第一个的后半部分配第二个的前半部分。</li>
</ol>
<p>然后判定配对成功与否用一个桶即可，这样递归下去也跑的比较快。<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">bool</span> <span class="title">dfs</span><span class="params">(<span class="built_in">string</span>&amp; s1, <span class="built_in">string</span>&amp; s2, <span class="keyword">int</span> l1, <span class="keyword">int</span> r1, <span class="keyword">int</span> l2, <span class="keyword">int</span> r2, <span class="keyword">bool</span> flag)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (r1 - l1 == <span class="number">1</span>)</span><br><span class="line">            <span class="keyword">return</span> s1[l1] == s2[l2];</span><br><span class="line">        <span class="keyword">int</span> vec[<span class="number">128</span>] = &#123;<span class="number">0</span>&#125;, cnt = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; r1 - l1; ++i)&#123;</span><br><span class="line">            <span class="keyword">if</span> (vec[s1[l1 + i - <span class="number">1</span>]] == <span class="number">0</span>) ++cnt;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span> (vec[s1[l1 + i - <span class="number">1</span>]] == <span class="number">-1</span>) --cnt;</span><br><span class="line">            ++vec[s1[l1 + i - <span class="number">1</span>]];</span><br><span class="line">            <span class="keyword">if</span> (flag) &#123;</span><br><span class="line">                <span class="keyword">if</span> (vec[s2[l2 + i - <span class="number">1</span>]] == <span class="number">1</span>) --cnt;</span><br><span class="line">                <span class="keyword">else</span> <span class="keyword">if</span> (vec[s2[l2 + i - <span class="number">1</span>]] == <span class="number">0</span>) ++cnt;</span><br><span class="line">                --vec[s2[l2 + i - <span class="number">1</span>]];</span><br><span class="line">                <span class="keyword">if</span> (cnt == <span class="number">0</span> &amp;&amp; (dfs(s1, s2, l1, l1 + i, l2, l2 + i, <span class="literal">true</span>) || dfs(s1, s2, l1, l1 + i, l2, l2 + i, <span class="literal">false</span>)) &amp;&amp;</span><br><span class="line">                    (dfs(s1, s2, l1 + i, r1, l2 + i, r2, <span class="literal">true</span>) || dfs(s1, s2, l1 + i, r1, l2 + i, r2, <span class="literal">false</span>)))</span><br><span class="line">                    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">            &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="keyword">if</span> (vec[s2[r2 - i]] == <span class="number">1</span>) --cnt;</span><br><span class="line">                <span class="keyword">else</span> <span class="keyword">if</span> (vec[s2[r2 - i]] == <span class="number">0</span>) ++cnt;</span><br><span class="line">                --vec[s2[r2 - i]];</span><br><span class="line">                <span class="keyword">if</span> (cnt == <span class="number">0</span> &amp;&amp; (dfs(s1, s2, l1, l1 + i, r2 - i, r2, <span class="literal">true</span>) || dfs(s1, s2, l1, l1 + i, r2 - i, r2, <span class="literal">false</span>)) &amp;&amp;</span><br><span class="line">                    (dfs(s1, s2, l1 + i, r1, l2, r2 - i, <span class="literal">true</span>) || dfs(s1, s2, l1 + i, r1, l2, r2 - i, <span class="literal">false</span>)))</span><br><span class="line">                    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">bool</span> <span class="title">isScramble</span><span class="params">(<span class="built_in">string</span> s1, <span class="built_in">string</span> s2)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> dfs(s1, s2, <span class="number">0</span>, s1.length(), <span class="number">0</span>, s2.length(), <span class="literal">true</span>) || </span><br><span class="line">            dfs(s1, s2, <span class="number">0</span>, s1.length(), <span class="number">0</span>, s2.length(), <span class="literal">false</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></p>
<h1 id="97"><a href="#97" class="headerlink" title="97"></a>97</h1><p>简单的 DP。可以压成一维。<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">bool</span> <span class="title">isInterleave</span><span class="params">(<span class="built_in">string</span> s1, <span class="built_in">string</span> s2, <span class="built_in">string</span> s3)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> ( s1.empty() ) <span class="keyword">return</span> s2 == s3;</span><br><span class="line">        <span class="keyword">if</span> ( s2.empty() ) <span class="keyword">return</span> s1 == s3;</span><br><span class="line">        <span class="keyword">int</span> n = s1.length(), m = s2.length();</span><br><span class="line">        <span class="keyword">if</span> ( n + m != s3.length() ) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        <span class="built_in">vector</span>&lt;<span class="built_in">vector</span>&lt;<span class="keyword">bool</span>&gt; &gt; f( n + <span class="number">1</span>, <span class="built_in">vector</span>&lt;<span class="keyword">bool</span>&gt;( m + <span class="number">1</span>, <span class="literal">false</span> ));</span><br><span class="line">        f[<span class="number">0</span>][<span class="number">0</span>] = <span class="literal">true</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; ++i)&#123;</span><br><span class="line">            <span class="keyword">if</span> ( s1[i] == s3[i] &amp;&amp; f[i][<span class="number">0</span>] ) f[i + <span class="number">1</span>][<span class="number">0</span>] = <span class="literal">true</span>;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; m; ++i)&#123;</span><br><span class="line">            <span class="keyword">if</span> ( s2[i] == s3[i] &amp;&amp; f[<span class="number">0</span>][i] ) f[<span class="number">0</span>][i + <span class="number">1</span>] = <span class="literal">true</span>;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; ++i)&#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; m; ++j)&#123;</span><br><span class="line">                <span class="keyword">if</span> ( s1[i] == s3[i + j + <span class="number">1</span>] &amp;&amp; f[i][j + <span class="number">1</span>] )</span><br><span class="line">                    f[i + <span class="number">1</span>][j + <span class="number">1</span>] = <span class="literal">true</span>;</span><br><span class="line">                <span class="keyword">else</span> <span class="keyword">if</span> ( s2[j] == s3[i + j + <span class="number">1</span>] &amp;&amp; f[i + <span class="number">1</span>][j] ) </span><br><span class="line">                    f[i + <span class="number">1</span>][j + <span class="number">1</span>] = <span class="literal">true</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> f[n][m];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></p>
<h1 id="99"><a href="#99" class="headerlink" title="99"></a>99</h1><p>观察可以发现：整个中序遍历序列中，只会出现一或两次前一元素大于后一元素的情况。而且一次的情况可以视作是两次该结构出现在同一位置的特殊情况。<br>这样规约后得到：对于序列中靠前的该结构，其前一元素是被交换的；对于序列中靠后的该结构，其后一元素是被交换的。这样就找到了两个交换了的元素。<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    TreeNode *lst1, *targ1, *targ2;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">dfs</span><span class="params">(TreeNode* root)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (root == <span class="literal">NULL</span>) <span class="keyword">return</span> ;</span><br><span class="line">        dfs(root-&gt;left);</span><br><span class="line">        <span class="keyword">if</span> (lst1 != <span class="literal">NULL</span> &amp;&amp; lst1-&gt;val &gt; root-&gt;val)&#123;</span><br><span class="line">            <span class="keyword">if</span> (targ1 == <span class="literal">NULL</span>) targ1 = lst1, targ2 = root;</span><br><span class="line">            <span class="keyword">else</span> targ2 = root;</span><br><span class="line">        &#125;</span><br><span class="line">        lst1 = root;</span><br><span class="line">        dfs(root-&gt;right);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">recoverTree</span><span class="params">(TreeNode* root)</span> </span>&#123;</span><br><span class="line">        lst1 = <span class="literal">NULL</span>, targ1 = targ2 = <span class="literal">NULL</span>;</span><br><span class="line">        dfs(root);</span><br><span class="line">        swap(targ1-&gt;val, targ2-&gt;val);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></p>
<p>注：这里的代码并不是一开始交上去的代码，而是做了精简的版本。原版考虑了一个更加复杂的结构，但也是对的。</p>
<h1 id="115"><a href="#115" class="headerlink" title="115"></a>115</h1><p>一个挺水的计数DP，但是可以优化到不错的效果。<br>可以层层优化。<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">numDistinct</span><span class="params">(<span class="built_in">string</span> s, <span class="built_in">string</span> t)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> n = s.size(), m = t.size();</span><br><span class="line">        <span class="built_in">vector</span>&lt;<span class="built_in">vector</span>&lt;<span class="keyword">unsigned</span>&gt; &gt; f(n + <span class="number">1</span>, <span class="built_in">vector</span>&lt;<span class="keyword">unsigned</span>&gt;(m + <span class="number">1</span>, <span class="number">0</span>));</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt;= n; ++i)</span><br><span class="line">            f[i][<span class="number">0</span>] = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; m; ++j)&#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; ++i)&#123;</span><br><span class="line">                <span class="keyword">if</span>(s[i] == t[j])&#123;</span><br><span class="line">                    f[i + <span class="number">1</span>][j + <span class="number">1</span>] = f[i][j] + f[i][j + <span class="number">1</span>];</span><br><span class="line">                &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                    f[i + <span class="number">1</span>][j + <span class="number">1</span>] = f[i][j + <span class="number">1</span>];</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> f[n][m];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></p>
<h1 id="123"><a href="#123" class="headerlink" title="123"></a>123</h1><p>对122的DP方程稍微做些修改即可。<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">maxProfit</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&amp; prices)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> n = prices.size();</span><br><span class="line">        <span class="keyword">if</span>(n &lt;= <span class="number">1</span>) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; f(n, <span class="number">0</span>);</span><br><span class="line">        <span class="keyword">int</span> mini = prices[<span class="number">0</span>];</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; n; ++i)&#123;</span><br><span class="line">            f[i] = max(prices[i] - mini, f[i - <span class="number">1</span>]);</span><br><span class="line">            mini = min(mini, prices[i]);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">int</span> pst1 = -prices[<span class="number">0</span>], ans = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; n; ++i)&#123;</span><br><span class="line">            <span class="keyword">int</span> tmp = prices[i] + pst1;</span><br><span class="line">            ans = max(ans, tmp);</span><br><span class="line">            pst1 = max(pst1, f[i - <span class="number">1</span>] - prices[i]);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> ans;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></p>
<h1 id="124"><a href="#124" class="headerlink" title="124"></a>124</h1><p>简单的树形DP，考虑以当前节点为LCA的最大路径和，那么只需要求出左、右两个节点为根时对应的最大路径和相加即可。<br>可以设计成下面的递归函数求解。<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="keyword">int</span> ans;</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">dfs</span><span class="params">(TreeNode *root)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(root == <span class="literal">NULL</span>) <span class="keyword">return</span> <span class="number">-2147483648</span>;</span><br><span class="line">        <span class="keyword">int</span> ll = max(<span class="number">0</span>, dfs(root-&gt;left));</span><br><span class="line">        <span class="keyword">int</span> rr = max(<span class="number">0</span>, dfs(root-&gt;right));</span><br><span class="line">        ans = max(ans, root-&gt;val + ll + rr);</span><br><span class="line">        <span class="keyword">return</span> root-&gt;val + max(ll, rr);</span><br><span class="line">    &#125; </span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">maxPathSum</span><span class="params">(TreeNode* root)</span> </span>&#123;</span><br><span class="line">        ans = <span class="number">-2147483648</span>;</span><br><span class="line">        dfs(root);</span><br><span class="line">        <span class="keyword">return</span> ans;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></p>
<h1 id="128"><a href="#128" class="headerlink" title="128"></a>128</h1><p>一开始想到的是万能的排序，后来想到这种依附关系用并查集很好维护，进而推想出可以不用并查集而是用 Hash Table 直接扫区间。<br>所以就是 $O(n)$ 了。这里偷了懒，用的是自带的 unordered_map。<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">longestConsecutive</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&amp; nums)</span> </span>&#123;</span><br><span class="line">        <span class="built_in">unordered_map</span>&lt;<span class="keyword">int</span>, <span class="keyword">int</span>&gt; mp;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; nums.size(); ++i)</span><br><span class="line">            mp[nums[i]] = i;</span><br><span class="line">        <span class="keyword">int</span> ans = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; nums.size(); ++i)&#123;</span><br><span class="line">            <span class="keyword">if</span> ( !mp.count( nums[i] ) ) <span class="keyword">continue</span>;</span><br><span class="line">            mp.erase( nums[i] );</span><br><span class="line">            <span class="keyword">int</span> res = <span class="number">1</span>, tmp = nums[i];</span><br><span class="line">            <span class="keyword">while</span> ( mp.count( tmp + <span class="number">1</span> ) )</span><br><span class="line">                ++res, mp.erase( tmp + <span class="number">1</span> ), ++tmp;</span><br><span class="line">            tmp = nums[i];</span><br><span class="line">            <span class="keyword">while</span> ( mp.count( tmp - <span class="number">1</span> ) )</span><br><span class="line">                ++res, mp.erase( tmp - <span class="number">1</span> ), --tmp;</span><br><span class="line">            ans = max( ans, res );</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> ans;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></p>
<h1 id="132"><a href="#132" class="headerlink" title="132"></a>132</h1><p>比较标准的一维 $O(n^2)$ DP，不知道有没有更好的方法。。。<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">vector</span>&lt;<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&gt; pos;</span><br><span class="line">    <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; ans;</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">minCut</span><span class="params">(<span class="built_in">string</span> s)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> n = s.length();</span><br><span class="line">        pos = <span class="built_in">vector</span>&lt;<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; &gt;(n, <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;());</span><br><span class="line">        ans = <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;(n, n);</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; ++i)</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = i, k = i; j &gt;= <span class="number">0</span> &amp;&amp; k &lt; n &amp;&amp; s[j] == s[k]; --j, ++k)</span><br><span class="line">                pos[k].push_back(j);</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n - <span class="number">1</span>; ++i)</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = i, k = i + <span class="number">1</span>; j &gt;= <span class="number">0</span> &amp;&amp; k &lt; n &amp;&amp; s[j] == s[k]; --j, ++k)</span><br><span class="line">                pos[k].push_back(j);</span><br><span class="line">        ans[<span class="number">0</span>] = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; n; ++i) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j: pos[i])&#123;</span><br><span class="line">                <span class="keyword">if</span> (j == <span class="number">0</span>)&#123;</span><br><span class="line">                    ans[i] = <span class="number">0</span>;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                &#125;<span class="keyword">else</span> ans[i] = min(ans[i], ans[j - <span class="number">1</span>] + <span class="number">1</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> ans[n - <span class="number">1</span>];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></p>
<h1 id="135"><a href="#135" class="headerlink" title="135"></a>135</h1><p>一个比较水的递推。<br>可以发现这个题只有在分数不断下降的时候比较难搞，我们就记录一下总共下降的长度和这个下降坡对应第一个人的糖果数目。在下降的时候，我们先认为每一个人都只分到 0 个糖，在整个下降序列结束的时候再结算。<br>然后就是简单的数学问题：对于第一个人，考虑要不要增加他的糖果数，使得其糖果数至少等于下降序列的长度；对于其他人，他们的糖果数依次递减，最后递减到 1，所以很容易算出这一部分的糖果总数。<br>最后统计答案即可。为了节省空间，我们只记录前一个人的糖果数，而不是把糖果数记录成为一个数组。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">candy</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&amp; ratings)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> ans = <span class="number">1</span>, n = ratings.size(), lst = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">int</span> len = <span class="number">1</span>, st = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; n; ++i)&#123;</span><br><span class="line">            <span class="keyword">if</span> (ratings[i] &gt; ratings[i - <span class="number">1</span>])&#123;</span><br><span class="line">                ans += lst + <span class="number">1</span>, ++lst;</span><br><span class="line">                ans += (len * (len - <span class="number">1</span>) &gt;&gt; <span class="number">1</span>) + max(len - st, <span class="number">0</span>);</span><br><span class="line">                len = <span class="number">1</span>, st = lst;</span><br><span class="line">            &#125;<span class="keyword">else</span> <span class="keyword">if</span> (ratings[i] == ratings[i - <span class="number">1</span>])&#123;</span><br><span class="line">                ++ans, lst = <span class="number">1</span>;</span><br><span class="line">                ans += (len * (len - <span class="number">1</span>) &gt;&gt; <span class="number">1</span>) + max(len - st, <span class="number">0</span>);</span><br><span class="line">                len = <span class="number">1</span>, st = lst;</span><br><span class="line">            &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">                lst = <span class="number">1</span>, ++len;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        ans += (len * (len - <span class="number">1</span>) &gt;&gt; <span class="number">1</span>) + max(len - st, <span class="number">0</span>);</span><br><span class="line">        <span class="keyword">return</span> ans;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h1 id="140"><a href="#140" class="headerlink" title="140"></a>140</h1><p>在 139 的基础上修改一下，记录路径即可。<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">vector</span>&lt;<span class="built_in">string</span>&gt; ans;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> cur, <span class="built_in">string</span> str, <span class="built_in">vector</span>&lt;<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&gt;&amp; e, <span class="built_in">vector</span>&lt;<span class="built_in">string</span>&gt;&amp; wordDict)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (!cur) &#123;</span><br><span class="line">            str.pop_back();</span><br><span class="line">            ans.push_back(str);</span><br><span class="line">            <span class="keyword">return</span> ;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> v: e[cur])</span><br><span class="line">            dfs(cur - wordDict[v].length(), wordDict[v] + <span class="string">" "</span> + str, e, wordDict);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">vector</span>&lt;<span class="built_in">string</span>&gt; wordBreak(<span class="built_in">string</span> s, <span class="built_in">vector</span>&lt;<span class="built_in">string</span>&gt;&amp; wordDict) &#123;</span><br><span class="line">        <span class="keyword">int</span> l = s.length(), n = wordDict.size();</span><br><span class="line">        <span class="built_in">vector</span>&lt;<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&gt; edges(l + <span class="number">1</span>, <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;());</span><br><span class="line">        edges[<span class="number">0</span>].push_back(<span class="number">-1</span>);</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= l; ++i)&#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; n; ++j)&#123;</span><br><span class="line">                <span class="keyword">int</span> l1 = wordDict[j].length();</span><br><span class="line">                <span class="keyword">if</span> (i &gt;= l1 &amp;&amp; s.substr(i - l1, l1) == wordDict[j] &amp;&amp; !edges[i - l1].empty())&#123;</span><br><span class="line">                    edges[i].push_back(j);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        dfs(l, <span class="string">""</span>, edges, wordDict);</span><br><span class="line">        <span class="keyword">return</span> ans;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></p>
<h1 id="145"><a href="#145" class="headerlink" title="145"></a>145</h1><p>这很难？<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Definition for a binary tree node.</span></span><br><span class="line"><span class="comment"># class TreeNode:</span></span><br><span class="line"><span class="comment">#     def __init__(self, x):</span></span><br><span class="line"><span class="comment">#         self.val = x</span></span><br><span class="line"><span class="comment">#         self.left = None</span></span><br><span class="line"><span class="comment">#         self.right = None</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">postorderTraversal</span><span class="params">(self, root: TreeNode)</span> -&gt; List[int]:</span></span><br><span class="line">        <span class="keyword">if</span> root == <span class="keyword">None</span>:</span><br><span class="line">            <span class="keyword">return</span> []</span><br><span class="line">        ans = []</span><br><span class="line">        <span class="function"><span class="keyword">def</span> <span class="title">travell</span><span class="params">(curn)</span>:</span></span><br><span class="line">            <span class="keyword">if</span> curn.left != <span class="keyword">None</span>:</span><br><span class="line">                travell(curn.left)</span><br><span class="line">            <span class="keyword">if</span> curn.right != <span class="keyword">None</span>:</span><br><span class="line">                travell(curn.right)</span><br><span class="line">            ans.append(curn.val)</span><br><span class="line">            </span><br><span class="line">        travell(root)</span><br><span class="line">        <span class="keyword">return</span> ans</span><br></pre></td></tr></table></figure></p>
<p>不过要想到这个比较精巧的非递归方法，是挺难的。</p>
<h1 id="149"><a href="#149" class="headerlink" title="149"></a>149</h1><p>本来以为这个题目要用什么非常高深的方法，结果发现就是暴力 $O(N^2)$。。。<br>用一个 map 记录一下就行了，要开 long double，因为有数据专门卡这个。<br>不过看评论区发现更暴力的 $O(N^3)$ 好像更快，应该是因为用的是整数的叉积，同时没有用到什么数据结构。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">maxPoints</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&gt;&amp; points)</span> </span>&#123;</span><br><span class="line">        <span class="built_in">unordered_map</span>&lt;<span class="keyword">long</span> <span class="keyword">double</span>, <span class="keyword">int</span>&gt; mp;</span><br><span class="line">        <span class="keyword">int</span> ans = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; points.size(); ++i)&#123;</span><br><span class="line">            mp.clear();</span><br><span class="line">            <span class="keyword">int</span> vect = <span class="number">0</span>, self = <span class="number">1</span>, maxi = <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = i + <span class="number">1</span>; j &lt; points.size(); ++j)&#123;</span><br><span class="line">                <span class="keyword">if</span> (points[j][<span class="number">0</span>] == points[i][<span class="number">0</span>])</span><br><span class="line">                    <span class="keyword">if</span> (points[j][<span class="number">1</span>] == points[i][<span class="number">1</span>]) self++;</span><br><span class="line">                    <span class="keyword">else</span> vect++;</span><br><span class="line">                <span class="keyword">else</span>&#123;</span><br><span class="line">                    <span class="keyword">long</span> <span class="keyword">double</span> k = (<span class="keyword">long</span> <span class="keyword">double</span>) (points[j][<span class="number">1</span>] - points[i][<span class="number">1</span>]) / (points[j][<span class="number">0</span>] - points[i][<span class="number">0</span>]);</span><br><span class="line">                    <span class="keyword">if</span> (!mp.count(k)) mp[k] = <span class="number">1</span>, maxi = max(maxi, <span class="number">1</span>);</span><br><span class="line">                    <span class="keyword">else</span> ++mp[k], maxi = max(maxi, mp[k]);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            maxi = max(maxi, vect) + self;</span><br><span class="line">            ans = max(ans, maxi);</span><br><span class="line">        &#125; </span><br><span class="line">        <span class="keyword">return</span> ans;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h1 id="164"><a href="#164" class="headerlink" title="164"></a>164</h1><p>邓公的计算几何里面讲到过这个题。<br>大体思路就是按照元素个数分配相应个数的桶，然后把数据放进桶里，比较左边桶的最大值和右边桶的最小值之间的差值。<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure></p>
<h1 id="174"><a href="#174" class="headerlink" title="174"></a>174</h1><p>非常傻的一个解法（我写的）是二分答案。实际上根本没必要，只要从终点开始 DP 就行了。状态表示为从当前位置到终点需要的最小 HP。<br>这可能也说明了一些问题：一些用二分可以做的题目，实际上可能倒推更好做。<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">calculateMinimumHP</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&gt;&amp; dungeon)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> ( dungeon.empty() ) <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">int</span> n = dungeon.size(), m = dungeon[<span class="number">0</span>].size();</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = n - <span class="number">1</span>; i &gt;= <span class="number">0</span>; --i)</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = m - <span class="number">1</span>; j &gt;= <span class="number">0</span>; --j)&#123;</span><br><span class="line">                <span class="keyword">if</span> ( i == n - <span class="number">1</span> &amp;&amp; j == m - <span class="number">1</span> )</span><br><span class="line">                    dungeon[i][j] = max( <span class="number">0</span>, -dungeon[i][j] ) + <span class="number">1</span>;</span><br><span class="line">                <span class="keyword">else</span> &#123;</span><br><span class="line">                    <span class="keyword">int</span> mini = <span class="number">2147483647</span>;</span><br><span class="line">                    <span class="keyword">if</span> ( i + <span class="number">1</span> &lt; n ) mini = min( mini, dungeon[i + <span class="number">1</span>][j] );</span><br><span class="line">                    <span class="keyword">if</span> ( j + <span class="number">1</span> &lt; m ) mini = min( mini, dungeon[i][j + <span class="number">1</span>] );</span><br><span class="line">                    dungeon[i][j] = max( <span class="number">1</span>, mini - dungeon[i][j] );</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        <span class="keyword">return</span> dungeon[<span class="number">0</span>][<span class="number">0</span>];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></p>
<h1 id="188"><a href="#188" class="headerlink" title="188"></a>188</h1><p>对123再次修改，不断迭代求解，直到解的大小不再变化为止（因为$k$可以很大）。<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">maxProfit</span><span class="params">(<span class="keyword">int</span> k, <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&amp; prices)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> n = prices.size();</span><br><span class="line">        <span class="keyword">if</span>(n &lt;= <span class="number">1</span>) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        <span class="built_in">vector</span>&lt;<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; &gt; f(<span class="number">2</span>, <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;(n, <span class="number">0</span>));</span><br><span class="line">        <span class="keyword">int</span> mini = prices[<span class="number">0</span>];</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; n; ++i)&#123;</span><br><span class="line">            f[<span class="number">1</span>][i] = max(prices[i] - mini, f[<span class="number">1</span>][i - <span class="number">1</span>]);</span><br><span class="line">            mini = min(mini, prices[i]);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">int</span> lstans = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">2</span>; i &lt;= k; ++i)&#123;</span><br><span class="line">            <span class="keyword">int</span> B = i &amp; <span class="number">1</span>, B_ = <span class="number">1</span> - B;</span><br><span class="line">            fill(f[B].begin(), f[B].end(), <span class="number">0</span>);</span><br><span class="line">            <span class="keyword">int</span> pst1 = -prices[<span class="number">0</span>], curans = <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">1</span>; j &lt; n; ++j)&#123;</span><br><span class="line">                <span class="keyword">int</span> tmp = prices[j] + pst1;</span><br><span class="line">                f[B][j] = max(tmp, f[B][j - <span class="number">1</span>]);</span><br><span class="line">                curans = max(tmp, f[B][j]);</span><br><span class="line">                pst1 = max(pst1, f[B_][j - <span class="number">1</span>] - prices[j]);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span>(curans == lstans) <span class="keyword">return</span> curans;</span><br><span class="line">            lstans = curans;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">int</span> ans = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; ++i)</span><br><span class="line">            ans = max(ans, f[k &amp; <span class="number">1</span>][i]);</span><br><span class="line">        <span class="keyword">return</span> ans;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></p>
<h1 id="212"><a href="#212" class="headerlink" title="212"></a>212</h1><p>普通 DFS 加上一个 Trie 树。题目里给了这个提示。<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> dx[] = &#123;<span class="number">0</span>, <span class="number">0</span>, <span class="number">-1</span>, <span class="number">1</span>&#125;, dy[] = &#123;<span class="number">-1</span>, <span class="number">1</span>, <span class="number">0</span>, <span class="number">0</span>&#125;;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">WordDictionary</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">Node</span>&#123;</span></span><br><span class="line">        <span class="keyword">int</span> al[<span class="number">26</span>], isend;</span><br><span class="line">        Node() &#123;</span><br><span class="line">            <span class="built_in">memset</span>(al, <span class="number">0</span>, <span class="keyword">sizeof</span>(al));</span><br><span class="line">            isend = <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="built_in">vector</span>&lt;Node&gt; trie;</span><br><span class="line">    <span class="keyword">int</span> cnt;</span><br><span class="line">    WordDictionary() &#123;</span><br><span class="line">        trie.push_back(Node()), trie.push_back(Node());</span><br><span class="line">        cnt = <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">addWord</span><span class="params">(<span class="built_in">string</span>&amp; word, <span class="keyword">int</span> iid)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> rt = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">char</span> c: word)&#123;</span><br><span class="line">            <span class="keyword">if</span>(!trie[rt].al[c - <span class="string">'a'</span>])</span><br><span class="line">                trie.push_back(Node()), </span><br><span class="line">                trie[rt].al[c - <span class="string">'a'</span>] = ++cnt;</span><br><span class="line">            rt = trie[rt].al[c - <span class="string">'a'</span>];</span><br><span class="line">        &#125;</span><br><span class="line">        trie[rt].isend = iid;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    WordDictionary wc;</span><br><span class="line">    <span class="keyword">int</span> n, m;</span><br><span class="line">    <span class="built_in">vector</span>&lt;<span class="built_in">vector</span>&lt;<span class="keyword">bool</span>&gt; &gt; vis;</span><br><span class="line">    <span class="built_in">vector</span>&lt;<span class="keyword">bool</span>&gt; stat;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">dfs</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="built_in">vector</span>&lt;<span class="keyword">char</span>&gt;&gt;&amp; board, <span class="keyword">int</span> x, <span class="keyword">int</span> y, <span class="keyword">int</span> rt)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (wc.trie[rt].isend &gt; <span class="number">0</span>) </span><br><span class="line">            stat[wc.trie[rt].isend - <span class="number">1</span>] = <span class="literal">true</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">4</span>; ++i)&#123;</span><br><span class="line">            <span class="keyword">int</span> cx = x + dx[i], cy = y + dy[i];</span><br><span class="line">            <span class="keyword">if</span> (cx &lt; <span class="number">0</span> || cx &gt;= n || cy &lt; <span class="number">0</span> || cy &gt;= m || vis[cx][cy]) <span class="keyword">continue</span>;</span><br><span class="line">            <span class="keyword">if</span> (!wc.trie[rt].al[board[cx][cy] - <span class="string">'a'</span>]) <span class="keyword">continue</span>;</span><br><span class="line">            <span class="keyword">int</span> new_rt = wc.trie[rt].al[board[cx][cy] - <span class="string">'a'</span>];</span><br><span class="line">            vis[cx][cy] = <span class="literal">true</span>;</span><br><span class="line">            dfs(board, cx, cy, new_rt);</span><br><span class="line">            vis[cx][cy] = <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">vector</span>&lt;<span class="built_in">string</span>&gt; findWords(<span class="built_in">vector</span>&lt;<span class="built_in">vector</span>&lt;<span class="keyword">char</span>&gt;&gt;&amp; board, <span class="built_in">vector</span>&lt;<span class="built_in">string</span>&gt;&amp; words) &#123;</span><br><span class="line">        <span class="built_in">vector</span>&lt;<span class="built_in">string</span>&gt; ans;</span><br><span class="line">        <span class="keyword">if</span> (board.empty()) <span class="keyword">return</span> ans;</span><br><span class="line">        <span class="keyword">if</span> (words.empty()) <span class="keyword">return</span> ans;</span><br><span class="line">        n = board.size(), m = board[<span class="number">0</span>].size();</span><br><span class="line">        vis = <span class="built_in">vector</span>&lt;<span class="built_in">vector</span>&lt;<span class="keyword">bool</span>&gt; &gt;(n, <span class="built_in">vector</span>&lt;<span class="keyword">bool</span>&gt;(m, <span class="literal">false</span>));</span><br><span class="line">        <span class="keyword">int</span> wz = words.size();</span><br><span class="line">        stat = <span class="built_in">vector</span>&lt;<span class="keyword">bool</span>&gt;(wz, <span class="literal">false</span>);</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; wz; ++i)</span><br><span class="line">            wc.addWord(words[i], i + <span class="number">1</span>);</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; ++i)</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; m; ++j)&#123;</span><br><span class="line">                <span class="keyword">if</span> (!wc.trie[<span class="number">1</span>].al[board[i][j] - <span class="string">'a'</span>]) <span class="keyword">continue</span>;</span><br><span class="line">                <span class="keyword">int</span> new_rt = wc.trie[<span class="number">1</span>].al[board[i][j] - <span class="string">'a'</span>];</span><br><span class="line">                vis[i][j] = <span class="literal">true</span>, dfs(board, i, j, new_rt), vis[i][j] = <span class="literal">false</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; wz; ++i)</span><br><span class="line">            <span class="keyword">if</span> (stat[i]) ans.push_back(words[i]);</span><br><span class="line">        <span class="keyword">return</span> ans;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></p>
<h1 id="214"><a href="#214" class="headerlink" title="214"></a>214</h1><p>一开始手搓了一个暴力，结果在最后一个点炸上天去了。<br>于是果断上 manacher。其实要求的东西很简单，就是最长的回文前缀。<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">manacher</span><span class="params">(<span class="built_in">string</span>&amp; s, <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&amp; res)</span></span>&#123;</span><br><span class="line">        <span class="keyword">int</span> n = s.length();</span><br><span class="line">        res[<span class="number">0</span>] = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; (n &lt;&lt; <span class="number">1</span>) - <span class="number">1</span>; ++i) res[i] = <span class="number">-1</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>, rmost = <span class="number">0</span>; i &lt; (n &lt;&lt; <span class="number">1</span>) - <span class="number">1</span>; ++i)&#123;</span><br><span class="line">            <span class="keyword">int</span> l = (i &gt;&gt; <span class="number">1</span>), r = i - l, rpos = ((rmost + <span class="number">1</span>) &gt;&gt; <span class="number">1</span>) + res[rmost] - <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">if</span> ((rmost &lt;&lt; <span class="number">1</span>) &gt;= i)</span><br><span class="line">                res[i] = min(rpos - r + <span class="number">1</span>, res[(rmost &lt;&lt; <span class="number">1</span>) - i]);</span><br><span class="line">            <span class="keyword">while</span> (l - res[i] - <span class="number">1</span> &gt;= <span class="number">0</span> &amp;&amp; r + res[i] + <span class="number">1</span> &lt; n </span><br><span class="line">                &amp;&amp; s[l - res[i] - <span class="number">1</span>] == s[r + res[i] + <span class="number">1</span>])</span><br><span class="line">                ++res[i];</span><br><span class="line">            <span class="keyword">if</span> (r + res[i] - <span class="number">1</span> &gt; rpos)</span><br><span class="line">                rmost = i;</span><br><span class="line">        &#125; </span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="built_in">string</span> <span class="title">shortestPalindrome</span><span class="params">(<span class="built_in">string</span> s)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> n = s.length(), ans = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">if</span> (!n) <span class="keyword">return</span> s;</span><br><span class="line">        <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; res((n &lt;&lt; <span class="number">1</span>) - <span class="number">1</span>, <span class="number">0</span>);</span><br><span class="line">        manacher(s, res);</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; (n &lt;&lt; <span class="number">1</span>) - <span class="number">1</span>; ++i)&#123;</span><br><span class="line">            <span class="keyword">if</span> (res[i] + (i &amp; <span class="number">1</span>) == ((i + <span class="number">1</span>) &gt;&gt; <span class="number">1</span>))</span><br><span class="line">                ans = max(ans, (res[i] &lt;&lt; <span class="number">1</span>) + (i &amp; <span class="number">1</span>) + <span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">string</span> sans = s;</span><br><span class="line">        reverse(sans.begin(), sans.end());</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = ans; i &lt; n; ++i)   </span><br><span class="line">            sans.push_back(s[i]);</span><br><span class="line">        <span class="keyword">return</span> sans;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></p>
<h1 id="224"><a href="#224" class="headerlink" title="224"></a>224</h1><p>简单表达式计算<br>注意坑爹的2147483647<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">calculate</span><span class="params">(<span class="built_in">string</span> s)</span> </span>&#123;</span><br><span class="line">        s = <span class="string">"("</span> + s + <span class="string">")"</span>;</span><br><span class="line">        <span class="built_in">stack</span>&lt;<span class="keyword">int</span>&gt; operand;</span><br><span class="line">        <span class="built_in">stack</span>&lt;<span class="keyword">char</span>&gt; oprt;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">auto</span> calc = [&amp;operand, &amp;oprt]() -&gt; <span class="keyword">void</span>&#123;</span><br><span class="line">            <span class="keyword">int</span> r2 = operand.top();</span><br><span class="line">            operand.pop();</span><br><span class="line">            <span class="keyword">int</span> r1 = operand.top();</span><br><span class="line">            operand.pop();</span><br><span class="line">            <span class="keyword">if</span>(oprt.top() == <span class="string">'+'</span>) operand.push(r1 + r2);</span><br><span class="line">            <span class="keyword">else</span> operand.push(r1 - r2);</span><br><span class="line">            oprt.pop();</span><br><span class="line">        &#125;;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">int</span> n = s.size();</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>, t = <span class="number">-1</span>; i &lt; n; ++i)&#123;</span><br><span class="line">            <span class="keyword">if</span>(s[i] == <span class="string">' '</span>) <span class="keyword">continue</span>;</span><br><span class="line">            <span class="keyword">if</span>(<span class="built_in">isdigit</span>(s[i]))&#123;</span><br><span class="line">                <span class="keyword">if</span>(t &lt; <span class="number">0</span>) t = s[i] - <span class="string">'0'</span>;</span><br><span class="line">                <span class="keyword">else</span> t = t * <span class="number">10</span> + (s[i] - <span class="string">'0'</span>);</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                <span class="keyword">if</span>(s[i] == <span class="string">'('</span>)&#123;</span><br><span class="line">                    oprt.push(s[i]);</span><br><span class="line">                &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                    <span class="keyword">if</span>(t &gt;= <span class="number">0</span>) operand.push(t), t = <span class="number">-1</span>;</span><br><span class="line">                    <span class="keyword">while</span>(oprt.top() != <span class="string">'('</span>)</span><br><span class="line">                        calc();</span><br><span class="line">                    <span class="keyword">if</span>(s[i] == <span class="string">')'</span>) oprt.pop();</span><br><span class="line">                    <span class="keyword">else</span> oprt.push(s[i]);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> operand.top();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></p>
<h1 id="295"><a href="#295" class="headerlink" title="295"></a>295</h1><p>对顶堆<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MedianFinder</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="comment">/** initialize your data structure here. */</span></span><br><span class="line">    priority_queue&lt;<span class="keyword">int</span>&gt; pq1;</span><br><span class="line">    priority_queue&lt;<span class="keyword">int</span>, <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;, greater&lt;<span class="keyword">int</span>&gt; &gt; pq2;</span><br><span class="line">    <span class="keyword">int</span> n;</span><br><span class="line">    MedianFinder() &#123;</span><br><span class="line">        n = <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">addNum</span><span class="params">(<span class="keyword">int</span> num)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(n &amp; <span class="number">1</span>)&#123;</span><br><span class="line">            pq1.push(num);</span><br><span class="line">            pq2.push(pq1.top());</span><br><span class="line">            pq1.pop();</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="keyword">if</span>(pq1.empty() || pq1.top() &gt;= num) pq1.push(num);</span><br><span class="line">            <span class="keyword">else</span>&#123;</span><br><span class="line">                pq2.push(num);</span><br><span class="line">                pq1.push(pq2.top());</span><br><span class="line">                pq2.pop();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        ++n;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">double</span> <span class="title">findMedian</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(!n) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">if</span>(n &amp; <span class="number">1</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> pq1.top();</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="keyword">return</span> (pq1.top() + pq2.top()) * <span class="number">0.5</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></p>
<h1 id="297"><a href="#297" class="headerlink" title="297"></a>297</h1><p>比较简单的想法是把所有叶子节点表示出来，然后用前序遍历去记录。<br>注意数据可能带符号。<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Codec</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">dfs</span><span class="params">( TreeNode* root, <span class="built_in">string</span>&amp; ans )</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (root == <span class="literal">NULL</span>) &#123;</span><br><span class="line">            ans.push_back(<span class="string">' '</span>);</span><br><span class="line">            ans.push_back(<span class="string">'#'</span>);</span><br><span class="line">            <span class="keyword">return</span> ;</span><br><span class="line">        &#125;</span><br><span class="line">        ans.push_back(<span class="string">' '</span>);</span><br><span class="line">        ans += to_string( root-&gt;val );</span><br><span class="line">        dfs( root-&gt;left, ans );</span><br><span class="line">        dfs( root-&gt;right, ans );</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Encodes a tree to a single string.</span></span><br><span class="line">    <span class="function"><span class="built_in">string</span> <span class="title">serialize</span><span class="params">(TreeNode* root)</span> </span>&#123;</span><br><span class="line">        <span class="function"><span class="built_in">string</span> <span class="title">ans</span><span class="params">(<span class="string">""</span>)</span></span>;</span><br><span class="line">        dfs( root, ans );</span><br><span class="line">        <span class="keyword">return</span> ans;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    pair&lt;TreeNode*, <span class="keyword">int</span>&gt; dfs2( <span class="built_in">string</span>&amp; data, <span class="keyword">int</span> l )&#123;</span><br><span class="line">        ++l;</span><br><span class="line">        <span class="keyword">if</span> ( data[l] == <span class="string">'#'</span> ) <span class="keyword">return</span> make_pair( ( TreeNode* ) <span class="literal">NULL</span>, l + <span class="number">1</span> );</span><br><span class="line">        <span class="keyword">int</span> x = <span class="number">0</span>, flag = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">if</span> ( data[l] == <span class="string">'-'</span> ) flag = <span class="number">-1</span>, ++l;</span><br><span class="line">        <span class="keyword">while</span> ( data[l] != <span class="string">' '</span> )</span><br><span class="line">            x = x * <span class="number">10</span> + data[l] - <span class="string">'0'</span>, ++l;</span><br><span class="line">        x = x * flag;</span><br><span class="line">        TreeNode* root = <span class="keyword">new</span> TreeNode(x);</span><br><span class="line">        pair&lt;TreeNode*, <span class="keyword">int</span>&gt; res = dfs2 ( data, l );</span><br><span class="line">        root-&gt;left = res.first, l = res.second;</span><br><span class="line">        res = dfs2 ( data, l );</span><br><span class="line">        root-&gt;right = res.first, l = res.second;</span><br><span class="line">        <span class="keyword">return</span> make_pair( root, l );</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Decodes your encoded data to tree.</span></span><br><span class="line">    <span class="function">TreeNode* <span class="title">deserialize</span><span class="params">(<span class="built_in">string</span> data)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> dfs2( data, <span class="number">0</span> ).first;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></p>
<h1 id="312"><a href="#312" class="headerlink" title="312"></a>312</h1><p>简单的区间DP，状态设成戳破两个区间端点之间的气球可以得到的最大的分数。<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">maxCoins</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&amp; nums)</span> </span>&#123;</span><br><span class="line">        nums.push_back(<span class="number">1</span>);</span><br><span class="line">        nums.insert(nums.begin(), <span class="number">1</span>);</span><br><span class="line">        <span class="keyword">int</span> n = nums.size();</span><br><span class="line">        <span class="built_in">vector</span>&lt;<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; &gt; f(n, <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;(n, <span class="number">0</span>));</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">2</span>; i &lt; n; ++i)</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j + i &lt; n; ++j)</span><br><span class="line">                <span class="keyword">for</span> (<span class="keyword">int</span> k = j + <span class="number">1</span>; k &lt; j + i; ++k)	</span><br><span class="line">                    f[j][j + i]	= max(f[j][i + j], f[j][k] + f[k][j + i] + nums[k] * nums[i + j] * nums[j]); </span><br><span class="line">        <span class="keyword">return</span> f[<span class="number">0</span>][n - <span class="number">1</span>];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></p>
<h1 id="327"><a href="#327" class="headerlink" title="327"></a>327</h1><p>multiset维护前缀和<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">countRangeSum</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&amp; nums, <span class="keyword">int</span> lower, <span class="keyword">int</span> upper)</span> </span>&#123;</span><br><span class="line">        <span class="built_in">set</span>&lt;<span class="keyword">long</span> <span class="keyword">long</span>&gt; st;</span><br><span class="line">        st.insert(<span class="number">0</span>);</span><br><span class="line">        <span class="keyword">int</span> n = nums.size(), ans = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">long</span> <span class="keyword">long</span> ss = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; ++i)&#123;</span><br><span class="line">            ss += <span class="number">1l</span>l * nums[i];</span><br><span class="line">            ans += distance(st.lower_bound(ss - upper), st.upper_bound(ss - lower));</span><br><span class="line">            st.insert(ss);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//Si - Sj &gt;= lower -&gt; Sj &lt;= Si - lower</span></span><br><span class="line">        <span class="comment">//Si - Sj &lt;= upper -&gt; Sj &gt;= Si - upper</span></span><br><span class="line">        <span class="keyword">return</span> ans;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></p>
<h1 id="329"><a href="#329" class="headerlink" title="329"></a>329</h1><p>先对矩阵中的数排序，然后从小到大转移。或者记忆化搜索也可以。<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">longestIncreasingPath</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&gt;&amp; matrix)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">typedef</span> pair&lt;<span class="keyword">int</span>, pair&lt;<span class="keyword">int</span>, <span class="keyword">int</span>&gt; &gt; T;</span><br><span class="line">        <span class="built_in">vector</span>&lt;T&gt; vec;</span><br><span class="line">        <span class="keyword">int</span> n = matrix.size();</span><br><span class="line">        <span class="keyword">if</span>(!n) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">int</span> m = matrix[<span class="number">0</span>].size(), ans = <span class="number">0</span>;</span><br><span class="line">        <span class="built_in">vector</span>&lt;<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; &gt; f(n, <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;(m, <span class="number">1</span>));</span><br><span class="line">        <span class="keyword">int</span> dx[] = &#123;<span class="number">0</span>, <span class="number">0</span>, <span class="number">-1</span>, <span class="number">1</span>&#125;, dy[] = &#123;<span class="number">-1</span>, <span class="number">1</span>, <span class="number">0</span>, <span class="number">0</span>&#125;;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; ++i)</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; m; ++j)</span><br><span class="line">                vec.push_back(make_pair(matrix[i][j], make_pair(i, j)));</span><br><span class="line">        sort(vec.begin(), vec.end());</span><br><span class="line">        <span class="keyword">for</span> (T &amp;t: vec)&#123;</span><br><span class="line">            <span class="keyword">int</span> h = t.first, x = t.second.first, y = t.second.second;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">4</span>; ++i)&#123;</span><br><span class="line">                <span class="keyword">int</span> cx = x + dx[i], cy = y + dy[i];</span><br><span class="line">                <span class="keyword">if</span>(cx &lt; <span class="number">0</span> || cy &lt; <span class="number">0</span> || cx &gt;= n || cy &gt;= m) <span class="keyword">continue</span>;</span><br><span class="line">                <span class="keyword">if</span>(matrix[cx][cy] &lt; h) f[x][y] = max(f[x][y], f[cx][cy] + <span class="number">1</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            ans = max(ans, f[x][y]);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> ans;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></p>
<h1 id="336"><a href="#336" class="headerlink" title="336"></a>336</h1><h2 id="方法一-3"><a href="#方法一-3" class="headerlink" title="方法一"></a>方法一</h2><p>暴力能过，惊了（对，卡过去的）<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">vector</span>&lt;<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&gt; palindromePairs(<span class="built_in">vector</span>&lt;<span class="built_in">string</span>&gt;&amp; words) &#123;</span><br><span class="line">        <span class="keyword">int</span> n = words.size();</span><br><span class="line">        <span class="built_in">vector</span>&lt;<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&gt; ans;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; ++i)&#123;</span><br><span class="line">            <span class="keyword">int</span> len1 = words[i].length();</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; n; ++j)&#123;</span><br><span class="line">                <span class="keyword">if</span> (i == j) <span class="keyword">continue</span>;</span><br><span class="line">                <span class="keyword">int</span> len2 = words[j].length();</span><br><span class="line">                <span class="keyword">int</span> len = len1 + len2;</span><br><span class="line">                <span class="keyword">bool</span> flag = <span class="literal">true</span>;</span><br><span class="line">                <span class="keyword">for</span> (<span class="keyword">int</span> u = <span class="number">0</span>, v = len - <span class="number">1</span>; u &lt; v; ++u, --v)&#123;</span><br><span class="line">                    <span class="keyword">if</span> ((u &lt; len1 ? words[i][u]: words[j][u - len1]) != </span><br><span class="line">                        (v &gt;= len1 ? words[j][v - len1]: words[i][v]))&#123;</span><br><span class="line">                            flag = <span class="literal">false</span>;</span><br><span class="line">                            <span class="keyword">break</span>;</span><br><span class="line">                        &#125;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">if</span> (flag) ans.push_back(<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&#123;i, j&#125;);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> ans;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></p>
<h2 id="方法二-3"><a href="#方法二-3" class="headerlink" title="方法二"></a>方法二</h2><p>这个的思想和添加最短前缀变成回文串相似，考虑把字符串截成某两部分，检查前/后一部分是不是回文串，是的话把另一部分对称过去即可。<br>注意考虑空字符串。<br>不得不说，c++ 里面操纵字符串确实比 python 麻烦挺多。。。<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">vector</span>&lt;<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&gt; palindromePairs(<span class="built_in">vector</span>&lt;<span class="built_in">string</span>&gt;&amp; words) &#123;</span><br><span class="line">        <span class="keyword">int</span> n = words.size();</span><br><span class="line">        <span class="built_in">unordered_map</span>&lt;<span class="built_in">string</span>, <span class="keyword">int</span>&gt; mp;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; ++i)</span><br><span class="line">            mp[words[i]] = i;</span><br><span class="line">        <span class="keyword">auto</span> check = [](<span class="built_in">string</span>&amp; x, <span class="keyword">int</span> i, <span class="keyword">int</span> j)&#123;</span><br><span class="line">            <span class="keyword">for</span> (; i &lt; j; ++i, --j)</span><br><span class="line">                <span class="keyword">if</span> (x[i] != x[j]) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        &#125;;</span><br><span class="line">        <span class="built_in">vector</span>&lt;<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&gt; ans;</span><br><span class="line">        <span class="function"><span class="built_in">string</span> <span class="title">emptystr</span><span class="params">(<span class="string">""</span>)</span></span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; ++i)&#123;</span><br><span class="line">            <span class="keyword">int</span> l = words[i].length();</span><br><span class="line">            <span class="keyword">if</span> (!l) <span class="keyword">continue</span>;</span><br><span class="line">            <span class="keyword">if</span> (check(words[i], <span class="number">0</span>, l - <span class="number">1</span>))&#123;</span><br><span class="line">                <span class="keyword">if</span> (mp.count(emptystr)) &#123;</span><br><span class="line">                    <span class="keyword">int</span> id = mp[emptystr];</span><br><span class="line">                    ans.push_back(<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&#123;i, id&#125;), </span><br><span class="line">                    ans.push_back(<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&#123;id, i&#125;);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="built_in">string</span> tmp = words[i];</span><br><span class="line">                reverse(tmp.begin(), tmp.end());</span><br><span class="line">                <span class="keyword">if</span> (mp.count(tmp))&#123;</span><br><span class="line">                    <span class="keyword">int</span> id = mp[tmp];</span><br><span class="line">                    ans.push_back(<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&#123;id, i&#125;);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="built_in">string</span> tmpa = words[i];</span><br><span class="line">            reverse(tmpa.begin(), tmpa.end());</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; l - <span class="number">1</span>; ++j)&#123;</span><br><span class="line">                <span class="keyword">if</span> (check(words[i], <span class="number">0</span>, j))&#123;</span><br><span class="line">                    <span class="built_in">string</span> tmp = tmpa.substr(<span class="number">0</span>, l - j - <span class="number">1</span>);</span><br><span class="line">                    <span class="keyword">if</span> (mp.count(tmp))</span><br><span class="line">                        ans.push_back(<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&#123;mp[tmp], i&#125;);</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">if</span> (check(words[i], j + <span class="number">1</span>, l - <span class="number">1</span>))&#123;</span><br><span class="line">                    <span class="built_in">string</span> tmp = tmpa.substr(l - j - <span class="number">1</span>);</span><br><span class="line">                    <span class="keyword">if</span> (mp.count(tmp))</span><br><span class="line">                        ans.push_back(<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&#123;i, mp[tmp]&#125;);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> ans;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></p>
<h1 id="354"><a href="#354" class="headerlink" title="354"></a>354</h1><p>经典的二位偏序问题。</p>
<h2 id="方法一-4"><a href="#方法一-4" class="headerlink" title="方法一"></a>方法一</h2><p>最水的方法就是先按点对的方式排一个序，然后做 $O(n^2)$ 的朴素 DP。<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">maxEnvelopes</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&gt;&amp; envelopes)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> n = envelopes.size(), ans = <span class="number">0</span>;</span><br><span class="line">        sort(envelopes.begin(), envelopes.end(), [](<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&amp; v1, <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&amp; v2)&#123;</span><br><span class="line">            <span class="keyword">if</span> (v1[<span class="number">0</span>] == v2[<span class="number">0</span>]) <span class="keyword">return</span> v1[<span class="number">1</span>] &lt; v2[<span class="number">1</span>];</span><br><span class="line">            <span class="keyword">return</span> v1[<span class="number">0</span>] &lt; v2[<span class="number">0</span>];</span><br><span class="line">        &#125;);</span><br><span class="line">        <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; f(n, <span class="number">1</span>);</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; n; ++i)&#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; i; ++j)&#123;</span><br><span class="line">                <span class="keyword">if</span> (envelopes[i][<span class="number">0</span>] &gt; envelopes[j][<span class="number">0</span>] &amp;&amp; envelopes[i][<span class="number">1</span>] &gt; envelopes[j][<span class="number">1</span>])</span><br><span class="line">                    f[i] = max(f[i], f[j] + <span class="number">1</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; ++i)</span><br><span class="line">            ans = max(ans, f[i]);</span><br><span class="line">        <span class="keyword">return</span> ans;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></p>
<h2 id="方法二-4"><a href="#方法二-4" class="headerlink" title="方法二"></a>方法二</h2><h1 id="363"><a href="#363" class="headerlink" title="363"></a>363</h1><p>还是这种二维化一维的题目，先枚举要选择的两列，然后对行扫描，用一个 set 保存前面遇到的前缀和，每一次查询当前和减掉 $K$ 的 lower_bound 就行了。<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">maxSumSubmatrix</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&gt;&amp; matrix, <span class="keyword">int</span> k)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> n = matrix.size();</span><br><span class="line">        <span class="keyword">if</span> (!n) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">int</span> m = matrix[<span class="number">0</span>].size(), ans = INT_MIN;</span><br><span class="line">        <span class="keyword">if</span> (!m) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        <span class="built_in">vector</span>&lt;<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; &gt; sum(n + <span class="number">1</span>, <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;(m + <span class="number">1</span>, <span class="number">0</span>));</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; ++i)</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; m; ++j)</span><br><span class="line">                sum[i + <span class="number">1</span>][j + <span class="number">1</span>] = sum[i + <span class="number">1</span>][j] + matrix[i][j];</span><br><span class="line">        <span class="built_in">set</span>&lt;<span class="keyword">int</span>&gt; st;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= m; ++i)&#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = i; j &lt;= m; ++j)&#123;</span><br><span class="line">                st.clear();</span><br><span class="line">                st.insert(<span class="number">0</span>);</span><br><span class="line">                <span class="keyword">int</span> ssm = <span class="number">0</span>;</span><br><span class="line">                <span class="keyword">for</span> (<span class="keyword">int</span> t = <span class="number">1</span>; t &lt;= n; ++t)&#123;</span><br><span class="line">                    ssm += sum[t][j] - sum[t][i - <span class="number">1</span>];</span><br><span class="line">                    <span class="keyword">auto</span> iter = st.lower_bound(ssm - k);</span><br><span class="line">                    <span class="keyword">if</span> (iter != st.end())</span><br><span class="line">                        ans = max(ans, ssm - *iter);</span><br><span class="line">                    st.insert(ssm);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> ans;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></p>
<h1 id="483"><a href="#483" class="headerlink" title="483"></a>483</h1><p>外部枚举该进制可能的位数，内部二分出该进制。<br><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">smallestGoodBase</span><span class="params">(self, n: str)</span> -&gt; str:</span></span><br><span class="line">        <span class="keyword">from</span> math <span class="keyword">import</span> floor</span><br><span class="line">        <span class="function"><span class="keyword">def</span> <span class="title">db</span><span class="params">(x, t)</span>:</span></span><br><span class="line">            fz = x ** (t + <span class="number">1</span>) - <span class="number">1</span></span><br><span class="line">            <span class="keyword">return</span> fz // (x - <span class="number">1</span>)</span><br><span class="line">        n = int(n)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> t <span class="keyword">in</span> range(<span class="number">64</span>, <span class="number">1</span>, <span class="number">-1</span>):</span><br><span class="line">            ll, rr = <span class="number">2</span>, floor(n ** (<span class="number">1</span> / t))</span><br><span class="line">            <span class="keyword">while</span> ll &lt; rr:</span><br><span class="line">                mid = (ll + rr) &gt;&gt; <span class="number">1</span></span><br><span class="line">                <span class="keyword">if</span> db(mid, t) &lt; n:</span><br><span class="line">                    ll = mid + <span class="number">1</span></span><br><span class="line">                <span class="keyword">else</span>:</span><br><span class="line">                    rr = mid</span><br><span class="line">            <span class="keyword">if</span> db(ll, t) == n:</span><br><span class="line">                <span class="keyword">return</span> str(ll)</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> str(n - <span class="number">1</span>)</span><br></pre></td></tr></table></figure></p>
<h1 id="552"><a href="#552" class="headerlink" title="552"></a>552</h1><p>划分情况，总共可划分出 7 种情况：</p>
<ol>
<li>当前位不是 L，是第一个 L，是第二个 L，且之前没有出现过 A。</li>
<li>当前位不是 L，是第一个 L，是第二个 L，且之前出现过 A。</li>
<li>当前位是 A。（这种情况可以合并掉，所以总共可以只有 6 种，不过貌似用矩阵快速幂这种情况不能舍去？）</li>
</ol>
<p>然后就是一个比较显而易见的线性递推。可以用矩阵快速幂优化。当然这里数据比较小，可以不用。<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">checkRecord</span><span class="params">(<span class="keyword">int</span> n)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> f0 = <span class="number">1</span>, f1 = <span class="number">0</span>, f2 = <span class="number">0</span>, f3 = <span class="number">0</span>, f4 = <span class="number">0</span>, f5 = <span class="number">0</span>, f6 = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; ++i)&#123;</span><br><span class="line">            <span class="keyword">int</span> ff0 = ((f0 + f1) % <span class="number">1000000007</span> + f2) % <span class="number">1000000007</span>;</span><br><span class="line">            <span class="keyword">int</span> ff1 = f0;</span><br><span class="line">            <span class="keyword">int</span> ff2 = f1;</span><br><span class="line">            <span class="keyword">int</span> ff3 = ((f3 + f4) % <span class="number">1000000007</span> + f5) % <span class="number">1000000007</span>;</span><br><span class="line">            ff3 += f6;</span><br><span class="line">            <span class="keyword">if</span> (ff3 &gt;= <span class="number">1000000007</span>) ff3 -= <span class="number">1000000007</span>;</span><br><span class="line">            <span class="keyword">int</span> ff4 = (f3 + f6) % <span class="number">1000000007</span>;</span><br><span class="line">            <span class="keyword">int</span> ff5 = f4;</span><br><span class="line">            <span class="keyword">int</span> ff6 = ((f0 + f1) % <span class="number">1000000007</span> + f2) % <span class="number">1000000007</span>;</span><br><span class="line">            f0 = ff0, f1 = ff1, f2 = ff2, f3 = ff3, </span><br><span class="line">            f4 = ff4, f5 = ff5, f6 = ff6;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">int</span> ans = f0 + f1;</span><br><span class="line">        <span class="keyword">if</span> (ans &gt;= <span class="number">1000000007</span>) ans -= <span class="number">1000000007</span>;</span><br><span class="line">        ans += f2;</span><br><span class="line">        <span class="keyword">if</span> (ans &gt;= <span class="number">1000000007</span>) ans -= <span class="number">1000000007</span>;</span><br><span class="line">        ans += f3;</span><br><span class="line">        <span class="keyword">if</span> (ans &gt;= <span class="number">1000000007</span>) ans -= <span class="number">1000000007</span>;</span><br><span class="line">        ans += f4;</span><br><span class="line">        <span class="keyword">if</span> (ans &gt;= <span class="number">1000000007</span>) ans -= <span class="number">1000000007</span>;</span><br><span class="line">        ans += f5;</span><br><span class="line">        <span class="keyword">if</span> (ans &gt;= <span class="number">1000000007</span>) ans -= <span class="number">1000000007</span>;</span><br><span class="line">        ans += f6;</span><br><span class="line">        <span class="keyword">if</span> (ans &gt;= <span class="number">1000000007</span>) ans -= <span class="number">1000000007</span>;</span><br><span class="line">        <span class="keyword">return</span> ans;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></p>
<h1 id="632"><a href="#632" class="headerlink" title="632"></a>632</h1><p>看起来就像是那种经常出现的堆的题目。<br>用堆维护一个滑动窗口即可，时间复杂度 $O(N\log K)$。<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; smallestRange(<span class="built_in">vector</span>&lt;<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&gt;&amp; nums) &#123;</span><br><span class="line">        <span class="class"><span class="keyword">struct</span> <span class="title">N</span>&#123;</span></span><br><span class="line">            <span class="keyword">int</span> id;</span><br><span class="line">            <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;::iterator iter;  </span><br><span class="line">            N ( <span class="keyword">int</span> _id, <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;::iterator _v ): id( _id ), iter( _v ) &#123;&#125;</span><br><span class="line">        &#125;;</span><br><span class="line">        <span class="class"><span class="keyword">struct</span> <span class="title">cmp</span>&#123;</span></span><br><span class="line">            <span class="function"><span class="keyword">bool</span> <span class="title">operator</span><span class="params">()</span> <span class="params">( <span class="keyword">const</span> N&amp; n1, <span class="keyword">const</span> N&amp; n2 )</span></span>&#123;</span><br><span class="line">                <span class="keyword">return</span> *(n1.iter) &gt; *(n2.iter);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">        priority_queue&lt;N, <span class="built_in">vector</span>&lt;N&gt;, cmp&gt; pq;</span><br><span class="line">        <span class="keyword">int</span> n = nums.size();</span><br><span class="line">        <span class="keyword">int</span> ansl = <span class="number">2147483647</span>, ansr = <span class="number">-2147483648</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; ++i)&#123;</span><br><span class="line">            <span class="keyword">if</span> ( nums[i].empty() ) <span class="keyword">continue</span>;</span><br><span class="line">            pq.push( N( i, nums[i].begin() ) );</span><br><span class="line">            ansl = min( ansl, nums[i].front() );</span><br><span class="line">            ansr = max( ansr, nums[i].front() );</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">int</span> curl = ansl, curr = ansr;</span><br><span class="line">        <span class="keyword">for</span> (; ansr &gt; ansl &amp;&amp; !pq.empty(); )&#123;</span><br><span class="line">            N nn = pq.top();</span><br><span class="line">            pq.pop();</span><br><span class="line">            <span class="keyword">if</span> ( nn.iter + <span class="number">1</span> != nums[nn.id].end() )&#123;</span><br><span class="line">                curl = ( pq.size() == n - <span class="number">1</span> ) ? *pq.top().iter: curl;</span><br><span class="line">                ++nn.iter;</span><br><span class="line">                curl = min( curl, *nn.iter ), curr = max( curr, *nn.iter );</span><br><span class="line">                pq.push( nn );</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> ( ansr - ansl &gt; curr - curl )</span><br><span class="line">                ansl = curl, ansr = curr;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; &#123; ansl, ansr &#125;;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></p>
<h1 id="689"><a href="#689" class="headerlink" title="689"></a>689</h1><p>其实就是把两个的情况再叠加一个上去。<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; maxSumOfThreeSubarrays(<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&amp; nums, <span class="keyword">int</span> k) &#123;</span><br><span class="line">        <span class="keyword">int</span> n = nums.size();</span><br><span class="line">        <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; sum(n + <span class="number">1</span>), f1(n + <span class="number">1</span>, <span class="number">0</span>), f2(n + <span class="number">1</span>, <span class="number">0</span>);</span><br><span class="line">        <span class="keyword">int</span> ss = <span class="number">0</span>, maxi = <span class="number">-1</span>, ans = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; ++i)</span><br><span class="line">            ss += nums[i], sum[i + <span class="number">1</span>] = ss;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">2</span> * k, lst = k; i &lt;= n; ++i)&#123;</span><br><span class="line">            f1[i] = lst;</span><br><span class="line">            <span class="keyword">if</span>(sum[i - k + <span class="number">1</span>] - sum[i + <span class="number">1</span> - k - k] &gt; sum[lst] - sum[lst - k])</span><br><span class="line">                lst = i - k + <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">3</span> * k, lst = k + k; i &lt;= n; ++i)&#123;</span><br><span class="line">            f2[i] = lst;</span><br><span class="line">            <span class="keyword">if</span>(sum[f1[i + <span class="number">1</span> - k]] - sum[f1[i + <span class="number">1</span> - k] - k] + sum[i + <span class="number">1</span> - k] - sum[i + <span class="number">1</span> - k - k] &gt; </span><br><span class="line">                sum[f1[lst]] - sum[f1[lst] - k] + sum[lst] - sum[lst - k])</span><br><span class="line">                lst = i - k + <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">if</span>(sum[i] - sum[i - k] + sum[f2[i]] - sum[f2[i] - k] + sum[f1[f2[i]]] - sum[f1[f2[i]] - k] &gt; maxi)</span><br><span class="line">                maxi = sum[i] - sum[i - k] + sum[f2[i]] - sum[f2[i] - k] + sum[f1[f2[i]]] - sum[f1[f2[i]] - k], ans = i;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; rans;</span><br><span class="line">        rans.push_back(f1[f2[ans]] - k);</span><br><span class="line">        rans.push_back(f2[ans] - k);</span><br><span class="line">        rans.push_back(ans - k);</span><br><span class="line">        <span class="keyword">return</span> rans;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></p>
<h1 id="786"><a href="#786" class="headerlink" title="786"></a>786</h1><p>如果常数足够小可能可以用堆卡过去。<br>这里考虑二分，判定当前总共有多少个分数小于或等于 $mid$。如果刚好是 $K$ 个就作为答案返回最大的那个分数。<br>在二分的时候可以发现对于每一个分母，第一个大于 $mid$ 的分子是递增的。可以利用这一点在 $O(n)$ 时间内完成一次二分的判定。所以总的时间复杂度是 $O(nk)$，$k$ 是二分的次数。<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; kthSmallestPrimeFraction(<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&amp; A, <span class="keyword">int</span> K) &#123;</span><br><span class="line">        <span class="keyword">double</span> l = <span class="number">0.0</span>, r = <span class="number">1.0</span>;</span><br><span class="line">        <span class="keyword">int</span> n = A.size();</span><br><span class="line">        <span class="keyword">for</span> (; ; )&#123;</span><br><span class="line">            <span class="keyword">double</span> mid = (l + r) * <span class="number">0.5</span>;</span><br><span class="line">            <span class="keyword">int</span> cnt = <span class="number">0</span>, p = <span class="number">0</span>, q = <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>, j = <span class="number">0</span>; i &lt; n; ++i)&#123;</span><br><span class="line">                <span class="keyword">while</span> (j &lt; n &amp;&amp; A[j] &lt;= A[i] * mid)</span><br><span class="line">                    ++j;</span><br><span class="line">                cnt += j;</span><br><span class="line">                <span class="keyword">if</span> (j &gt; <span class="number">0</span> &amp;&amp; p * A[i] &lt; q * A[j - <span class="number">1</span>])</span><br><span class="line">                    p = A[j - <span class="number">1</span>], q = A[i];</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (cnt == K) <span class="keyword">return</span> <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&#123;p, q&#125;;</span><br><span class="line">            <span class="keyword">if</span> (cnt &lt; K) l = mid;</span><br><span class="line">            <span class="keyword">else</span> r = mid;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></p>
<h1 id="793"><a href="#793" class="headerlink" title="793"></a>793</h1><p>二分<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">preimageSizeFZF</span><span class="params">(<span class="keyword">int</span> K)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(K == <span class="number">0</span>) <span class="keyword">return</span> <span class="number">5</span>;</span><br><span class="line">        <span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line">        <span class="keyword">auto</span> calc = [](ll x) -&gt; <span class="keyword">int</span>&#123;</span><br><span class="line">            <span class="keyword">int</span> res = <span class="number">0</span>;</span><br><span class="line">            ll cur = <span class="number">5</span>;</span><br><span class="line">            <span class="keyword">while</span>(x &gt;= cur)</span><br><span class="line">                res += x / cur, cur *= <span class="number">5l</span>l;</span><br><span class="line">            <span class="keyword">return</span> res;</span><br><span class="line">        &#125;;</span><br><span class="line">        ll l1 = <span class="number">0</span>, r1 = K * <span class="number">5l</span>l;</span><br><span class="line">        <span class="keyword">while</span>(l1 &lt; r1)&#123;</span><br><span class="line">            ll mid = (l1 + r1) &gt;&gt; <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">if</span>(calc(mid) &lt; K)</span><br><span class="line">                l1 = mid + <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">else</span> r1 = mid;</span><br><span class="line">        &#125;</span><br><span class="line">        ll l2 = <span class="number">0</span>, r2 = (K + <span class="number">1</span>) * <span class="number">5l</span>l;</span><br><span class="line">        <span class="keyword">while</span>(l2 &lt; r2)&#123;</span><br><span class="line">            ll mid = (l2 + r2) &gt;&gt; <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">if</span>(calc(mid) &lt;= K)</span><br><span class="line">                l2 = mid + <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">else</span> r2 = mid;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> r2 - r1;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></p>
<h1 id="805"><a href="#805" class="headerlink" title="805"></a>805</h1><h2 id="方法一-5"><a href="#方法一-5" class="headerlink" title="方法一"></a>方法一</h2><p>DP<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">bool</span> <span class="title">splitArraySameAverage</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&amp; A)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> n = A.size(), sum = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">if</span>(n &lt;= <span class="number">1</span>) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i: A)</span><br><span class="line">            sum += i;</span><br><span class="line">        <span class="built_in">vector</span>&lt;<span class="built_in">vector</span>&lt;<span class="keyword">bool</span>&gt; &gt; f((n &gt;&gt; <span class="number">1</span>) + <span class="number">1</span>, <span class="built_in">vector</span>&lt;<span class="keyword">bool</span>&gt;(<span class="number">1</span> + (n &gt;&gt; <span class="number">1</span>) * sum / n, <span class="number">0</span>));</span><br><span class="line">        f[<span class="number">0</span>][<span class="number">0</span>] = <span class="literal">true</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; ++i)&#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = (n &gt;&gt; <span class="number">1</span>); j &gt;= <span class="number">1</span>; --j)</span><br><span class="line">                <span class="keyword">for</span> (<span class="keyword">int</span> k = (n &gt;&gt; <span class="number">1</span>) * sum / n; k &gt;= A[i]; --k)&#123;</span><br><span class="line">                    <span class="keyword">if</span>(f[j - <span class="number">1</span>][k - A[i]])</span><br><span class="line">                        f[j][k] = <span class="literal">true</span>;</span><br><span class="line">                &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = (n &gt;&gt; <span class="number">1</span>); i &gt;= <span class="number">1</span>; --i)&#123;</span><br><span class="line">            <span class="keyword">if</span>(i * sum % n) <span class="keyword">continue</span>;</span><br><span class="line">            <span class="keyword">int</span> targ = i * sum / n;</span><br><span class="line">            <span class="keyword">if</span>(f[i][targ]) <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></p>
<h2 id="方法二-5"><a href="#方法二-5" class="headerlink" title="方法二"></a>方法二</h2><p>暴搜（好像非常快？）<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure></p>
<h1 id="810"><a href="#810" class="headerlink" title="810"></a>810</h1><p>这种博弈论的神奇题目一般都不能大力递推。。。<br>可以发现，一个平凡的结论是：只要开局异或和是 0，那么先手必胜。然后有一个并不是很平凡的结论：除了这种情况之外，黑板在游戏结束的时候都会被擦干净。<br>（等待更新）<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">bool</span> <span class="title">xorGame</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&amp; nums)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> a = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i: nums) a ^= i;</span><br><span class="line">        <span class="keyword">return</span> (!a) || (nums.size() % <span class="number">2</span> == <span class="number">0</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></p>
<h1 id="827"><a href="#827" class="headerlink" title="827"></a>827</h1><p>这题为什么是 Hard？<br>枚举所有为 0 的点，然后看上下左右是否连接着岛和岛的大小。不断更新答案即可。<br>注意同一个岛不要重复统计。<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">largestIsland</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&gt;&amp; grid)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> dx[] = &#123;<span class="number">0</span>, <span class="number">0</span>, <span class="number">-1</span>, <span class="number">1</span>&#125;, dy[] = &#123;<span class="number">-1</span>, <span class="number">1</span>, <span class="number">0</span>, <span class="number">0</span>&#125;;</span><br><span class="line">        <span class="keyword">int</span> n = grid.size();</span><br><span class="line">        <span class="keyword">if</span>(!n) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">int</span> m = grid[<span class="number">0</span>].size(), tot_island = <span class="number">0</span>;</span><br><span class="line">        <span class="built_in">vector</span>&lt;pair&lt;<span class="keyword">int</span>, <span class="keyword">int</span>&gt; &gt; q;</span><br><span class="line">        <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; siz;</span><br><span class="line">        <span class="keyword">auto</span> v = [&amp;grid, &amp;q, dx, dy, n, m](<span class="keyword">int</span> x, <span class="keyword">int</span> y)&#123;</span><br><span class="line">            <span class="keyword">int</span> hd = q.size(), tl = hd;</span><br><span class="line">            q.push_back(make_pair(x, y)), ++tl;</span><br><span class="line">            grid[x][y] = <span class="number">-1</span>;</span><br><span class="line">            <span class="keyword">while</span>(tl &gt; hd)&#123;</span><br><span class="line">                x = q[hd].first, y = q[hd].second, ++hd;</span><br><span class="line">                <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">4</span>; ++i)&#123;</span><br><span class="line">                    <span class="keyword">int</span> cx = x + dx[i], cy = y + dy[i];</span><br><span class="line">                    <span class="keyword">if</span>(cx &lt; <span class="number">0</span> || cy &lt; <span class="number">0</span> || cx &gt;= n || cy &gt;= m) <span class="keyword">continue</span>;</span><br><span class="line">                    <span class="keyword">if</span>(grid[cx][cy] &lt; <span class="number">0</span> || grid[cx][cy] == <span class="number">0</span>) <span class="keyword">continue</span>;</span><br><span class="line">                    grid[cx][cy] = <span class="number">-1</span>;</span><br><span class="line">                    q.push_back(make_pair(cx, cy)), ++tl;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">        <span class="keyword">int</span> ans = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; ++i)</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; m; ++j)</span><br><span class="line">                <span class="keyword">if</span>(grid[i][j] == <span class="number">1</span>)&#123;</span><br><span class="line">                    <span class="keyword">int</span> lst = q.size();</span><br><span class="line">                    v(i, j), ++tot_island;</span><br><span class="line">                    <span class="keyword">for</span> (<span class="keyword">int</span> k = lst; k &lt; q.size(); ++k)</span><br><span class="line">                        grid[q[k].first][q[k].second] = -tot_island;</span><br><span class="line">                    siz.push_back(q.size() - lst), ans = max(ans, siz.back());</span><br><span class="line">                &#125;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; ++i)</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; m; ++j)</span><br><span class="line">                <span class="keyword">if</span>(grid[i][j] == <span class="number">0</span>)&#123;</span><br><span class="line">                    <span class="keyword">int</span> tot = <span class="number">1</span>;</span><br><span class="line">                    <span class="keyword">for</span> (<span class="keyword">int</span> k = <span class="number">0</span>; k &lt; <span class="number">4</span>; ++k)&#123;</span><br><span class="line">                        <span class="keyword">int</span> cx = i + dx[k], cy = j + dy[k];</span><br><span class="line">                        <span class="keyword">if</span>(cx &lt; <span class="number">0</span> || cy &lt; <span class="number">0</span> || cx &gt;= n || cy &gt;= m || grid[cx][cy] == <span class="number">0</span>) <span class="keyword">continue</span>;</span><br><span class="line">                        <span class="keyword">if</span> (siz[-grid[cx][cy] - <span class="number">1</span>] &lt; <span class="number">0</span>) <span class="keyword">continue</span>;</span><br><span class="line">                        tot += siz[-grid[cx][cy] - <span class="number">1</span>], siz[-grid[cx][cy] - <span class="number">1</span>] = -siz[-grid[cx][cy] - <span class="number">1</span>];</span><br><span class="line">                    &#125;</span><br><span class="line">                    ans = max(tot, ans);</span><br><span class="line">                    <span class="keyword">for</span> (<span class="keyword">int</span> k = <span class="number">0</span>; k &lt; <span class="number">4</span>; ++k)&#123;</span><br><span class="line">                        <span class="keyword">int</span> cx = i + dx[k], cy = j + dy[k];</span><br><span class="line">                        <span class="keyword">if</span>(cx &lt; <span class="number">0</span> || cy &lt; <span class="number">0</span> || cx &gt;= n || cy &gt;= m || grid[cx][cy] == <span class="number">0</span>) <span class="keyword">continue</span>;</span><br><span class="line">                        <span class="keyword">if</span> (siz[-grid[cx][cy] - <span class="number">1</span>] &gt; <span class="number">0</span>) <span class="keyword">continue</span>;</span><br><span class="line">                        siz[-grid[cx][cy] - <span class="number">1</span>] = -siz[-grid[cx][cy] - <span class="number">1</span>];</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">        <span class="keyword">return</span> ans;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></p>
<h1 id="854"><a href="#854" class="headerlink" title="854"></a>854</h1><p>暴搜？<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="keyword">int</span> n, ans;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">dfs</span><span class="params">(<span class="built_in">string</span>&amp; A, <span class="built_in">string</span>&amp; B, <span class="keyword">int</span> st, <span class="keyword">int</span> cur)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(cur == n)&#123;</span><br><span class="line">            ans = min(ans, st);</span><br><span class="line">            <span class="keyword">return</span> ;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">while</span>(cur &lt; n &amp;&amp; A[cur] == B[cur])</span><br><span class="line">            ++cur;</span><br><span class="line">        <span class="keyword">if</span>(cur == n)&#123;</span><br><span class="line">            ans = min(ans, st);</span><br><span class="line">            <span class="keyword">return</span> ;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = cur + <span class="number">1</span>; i &lt; n &amp;&amp; st &lt; ans - <span class="number">1</span>; ++i)&#123;</span><br><span class="line">            <span class="keyword">if</span>(A[i] == B[cur])&#123;</span><br><span class="line">                swap(A[i], A[cur]), dfs(A, B, st + <span class="number">1</span>, cur + <span class="number">1</span>), </span><br><span class="line">                swap(A[i], A[cur]);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">kSimilarity</span><span class="params">(<span class="built_in">string</span> A, <span class="built_in">string</span> B)</span> </span>&#123;</span><br><span class="line">        n = A.length();</span><br><span class="line">        ans = n;</span><br><span class="line">        dfs(A, B, <span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">        <span class="keyword">return</span> ans;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></p>
<h1 id="862"><a href="#862" class="headerlink" title="862"></a>862</h1><p>感觉好像没有做过这种题。。。</p>
<h1 id="878"><a href="#878" class="headerlink" title="878"></a>878</h1><p>简单数论题<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">gcd</span><span class="params">(<span class="keyword">int</span> a, <span class="keyword">int</span> b)</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> (!b) ? a: gcd(b, a % b);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">nthMagicalNumber</span><span class="params">(<span class="keyword">int</span> N, <span class="keyword">int</span> A, <span class="keyword">int</span> B)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> lcm = A * B / gcd(A, B);</span><br><span class="line">        <span class="keyword">int</span> r = lcm / A + lcm / B - <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">int</span> ans = <span class="number">1l</span>l * (N / r) * lcm % <span class="number">1000000007</span>;</span><br><span class="line">        N %= r;</span><br><span class="line">        <span class="keyword">if</span>(N)&#123;</span><br><span class="line">            <span class="keyword">int</span> j = A, k = B, res;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; N; ++i)&#123;</span><br><span class="line">                <span class="keyword">if</span>(j &lt;= k) res = j, j += A;</span><br><span class="line">                <span class="keyword">else</span> res = k, k += B;</span><br><span class="line">            &#125;</span><br><span class="line">            ans = (ans + res) % <span class="number">1000000007</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> ans;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></p>
<h1 id="895"><a href="#895" class="headerlink" title="895"></a>895</h1><p>按照频率维护栈即可，按栈里保存的元素顺序pop相应的结果<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">FreqStack</span>:</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></span><br><span class="line">        self.freq = &#123;&#125;</span><br><span class="line">        self.maxi = <span class="number">0</span></span><br><span class="line">        self.stacks = &#123;&#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">push</span><span class="params">(self, x: int)</span> -&gt; <span class="keyword">None</span>:</span></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> x <span class="keyword">in</span> self.freq:</span><br><span class="line">            self.freq[x] = <span class="number">1</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            self.freq[x] += <span class="number">1</span></span><br><span class="line">        f = self.freq[x]</span><br><span class="line">        <span class="keyword">if</span> f &gt; self.maxi:</span><br><span class="line">            self.maxi = f</span><br><span class="line">            <span class="keyword">if</span> <span class="keyword">not</span> self.maxi <span class="keyword">in</span> self.stacks:</span><br><span class="line">                self.stacks[self.maxi] = []</span><br><span class="line">        self.stacks[f].append(x)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">pop</span><span class="params">(self)</span> -&gt; int:</span></span><br><span class="line">        x = self.stacks[self.maxi].pop()</span><br><span class="line">        self.freq[x] -= <span class="number">1</span></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> self.stacks[self.maxi]:</span><br><span class="line">            self.maxi -= <span class="number">1</span></span><br><span class="line">        <span class="keyword">return</span> x</span><br></pre></td></tr></table></figure></p>
<h1 id="982"><a href="#982" class="headerlink" title="982"></a>982</h1><p>小暴力<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">countTriplets</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&amp; A)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> n = A.size(), maxi = <span class="number">1</span>, ans = <span class="number">0</span>;</span><br><span class="line">        <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; cnt(<span class="number">65536</span>, <span class="number">0</span>);</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; ++i)&#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; n; ++j) </span><br><span class="line">                cnt[A[i] &amp; A[j]]++;</span><br><span class="line">            <span class="keyword">while</span>(maxi &lt;= A[i]) maxi &lt;&lt;= <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; ++i)&#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; maxi; ++j)&#123;</span><br><span class="line">                <span class="keyword">if</span>(A[i] &amp; j) <span class="keyword">continue</span>;</span><br><span class="line">                ans += cnt[j];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> ans;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></p>
<h1 id="995"><a href="#995" class="headerlink" title="995"></a>995</h1><p>写了一个十分睿智的树状数组。。。<br>其实根本不需要，只要记录前缀和就行了。<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">minKBitFlips</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&amp; A, <span class="keyword">int</span> K)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> n = A.size(), ans = <span class="number">0</span>;</span><br><span class="line">        <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; ss(n + <span class="number">1</span>, <span class="number">0</span>);</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt;= n - K; ++i)&#123;</span><br><span class="line">            <span class="keyword">int</span> res = (ss[i] - ss[max(i - K + <span class="number">1</span>, <span class="number">0</span>)] + A[i]) % <span class="number">2</span>;</span><br><span class="line">            <span class="keyword">if</span>(!res)&#123;</span><br><span class="line">                ans++;</span><br><span class="line">                ss[i + <span class="number">1</span>]++;</span><br><span class="line">            &#125;</span><br><span class="line">            ss[i + <span class="number">1</span>] += ss[i];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = n - K + <span class="number">1</span>; i &lt; n; ++i)&#123;</span><br><span class="line">            <span class="keyword">int</span> res = (ss[i] - ss[max(i - K + <span class="number">1</span>, <span class="number">0</span>)] + A[i]) % <span class="number">2</span>;</span><br><span class="line">            <span class="keyword">if</span>(!res) <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">            ss[i + <span class="number">1</span>] = ss[i];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> ans;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></p>
<h1 id="996"><a href="#996" class="headerlink" title="996"></a>996</h1><p>小暴搜，先记录所有可以结成的对，然后搜索<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">vector</span>&lt;<span class="built_in">vector</span>&lt;<span class="keyword">bool</span>&gt; &gt; f;</span><br><span class="line">    <span class="keyword">int</span> ans;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> used, <span class="keyword">int</span> cur, <span class="keyword">int</span> lst, <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&amp; A)</span></span>&#123;</span><br><span class="line">        <span class="keyword">int</span> n = A.size();</span><br><span class="line">        <span class="keyword">if</span>(cur == n)&#123;</span><br><span class="line">            ans++;</span><br><span class="line">            <span class="keyword">return</span> ;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; )&#123;</span><br><span class="line">            <span class="keyword">int</span> j = i;</span><br><span class="line">            <span class="keyword">while</span>(j &lt; n &amp;&amp; A[i] == A[j])</span><br><span class="line">                ++j;</span><br><span class="line">            <span class="keyword">while</span>(i &lt; j &amp;&amp; ((<span class="number">1</span> &lt;&lt; i) &amp; used))</span><br><span class="line">                ++i;</span><br><span class="line">            <span class="keyword">if</span>(i == j) <span class="keyword">continue</span>;</span><br><span class="line">            <span class="keyword">if</span>(!f[lst][i])&#123;</span><br><span class="line">                i = j;</span><br><span class="line">                <span class="keyword">continue</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            dfs(used | (<span class="number">1</span> &lt;&lt; i), cur + <span class="number">1</span>, i, A);</span><br><span class="line">            i = j;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">numSquarefulPerms</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&amp; A)</span> </span>&#123;</span><br><span class="line">        sort(A.begin(), A.end());</span><br><span class="line">        <span class="keyword">int</span> n = A.size();</span><br><span class="line">        f = <span class="built_in">vector</span>&lt;<span class="built_in">vector</span>&lt;<span class="keyword">bool</span>&gt; &gt;(n, <span class="built_in">vector</span>&lt;<span class="keyword">bool</span>&gt;(n, <span class="number">0</span>));</span><br><span class="line">        <span class="keyword">auto</span> judge = [](<span class="keyword">int</span> x)&#123;</span><br><span class="line">            <span class="keyword">int</span> sqt = (<span class="keyword">int</span>)<span class="built_in">floor</span>(<span class="built_in">sqrt</span>(x) + <span class="number">0.5</span>);</span><br><span class="line">            <span class="keyword">if</span>(sqt * sqt &gt; x) sqt--;</span><br><span class="line">            <span class="keyword">return</span> sqt * sqt == x;</span><br><span class="line">        &#125;;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; ++i)</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = i + <span class="number">1</span>; j &lt; n; ++j)&#123;</span><br><span class="line">                <span class="keyword">if</span>(judge(A[i] + A[j]))</span><br><span class="line">                    f[i][j] = f[j][i] = <span class="literal">true</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        ans = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; )&#123;</span><br><span class="line">            <span class="keyword">int</span> j = i;</span><br><span class="line">            <span class="keyword">while</span>(j &lt; n &amp;&amp; A[i] == A[j])</span><br><span class="line">                ++j;</span><br><span class="line">            dfs(<span class="number">1</span> &lt;&lt; i, <span class="number">1</span>, i, A);</span><br><span class="line">            i = j;</span><br><span class="line">        &#125;    </span><br><span class="line">        <span class="keyword">return</span> ans;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></p>
<h1 id="1000"><a href="#1000" class="headerlink" title="1000"></a>1000</h1><p>类似于原版的石子归并，其实就是原来的两部分合并成一部分成了 K 部分合并成一部分。只需要递归的做就行了。<br>时间复杂度好像是 $O(n^3k)$？<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">vector</span>&lt;<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&gt; f;</span><br><span class="line">    <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; sum;</span><br><span class="line">    <span class="keyword">int</span> KK;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> k, <span class="keyword">int</span> l, <span class="keyword">int</span> r, <span class="keyword">int</span> acc, <span class="keyword">int</span>&amp; res)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (k == <span class="number">1</span>)&#123;</span><br><span class="line">            acc += sum[r + <span class="number">1</span>] - sum[l] + f[l][r];</span><br><span class="line">            res = min(res, acc);</span><br><span class="line">            <span class="keyword">return</span> ;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> t = <span class="number">0</span>; t + k - <span class="number">1</span> &lt;= r - l; t += (KK - <span class="number">1</span>))</span><br><span class="line">            dfs(k - <span class="number">1</span>, l + t + <span class="number">1</span>, r, acc + sum[l + t + <span class="number">1</span>] - sum[l] + f[l][l + t], res);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">mergeStones</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&amp; stones, <span class="keyword">int</span> K)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> n = stones.size();</span><br><span class="line">        <span class="keyword">if</span>((n - <span class="number">1</span>) % (K - <span class="number">1</span>)) <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">        f = <span class="built_in">vector</span>&lt;<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&gt;(n, <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;(n, <span class="number">0x3f3f3f3f</span>));</span><br><span class="line">        sum = <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;(n + <span class="number">1</span>, <span class="number">0</span>);</span><br><span class="line">        KK = K;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; ++i)</span><br><span class="line">            sum[i + <span class="number">1</span>] = sum[i] + stones[i], </span><br><span class="line">            f[i][i] = <span class="number">0</span>; </span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = K - <span class="number">1</span>; i &lt; n; i += K - <span class="number">1</span>)</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j + i &lt; n; ++j)</span><br><span class="line">                dfs(K, j, j + i, <span class="number">0</span>, f[j][j + i]);</span><br><span class="line">        <span class="keyword">return</span> f[<span class="number">0</span>][n - <span class="number">1</span>];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></p>
<h1 id="1074"><a href="#1074" class="headerlink" title="1074"></a>1074</h1><p>一般这样的问题都是考虑降维打击。也就是通过枚举某一维，将二维问题变换到一维上去解决。<br>这个题目也是，先尝试枚举矩形的上下两条边，然后可以用矩阵前缀和在常数时间内算出两条边之间的和。这样就变成了一维意义上的找和为目标值的问题。<br>时间复杂度 $O(n^3)$（设 $n$ 和 $m$ 同阶）。<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">numSubmatrixSumTarget</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&gt;&amp; matrix, <span class="keyword">int</span> target)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> n = matrix.size(), m = matrix[<span class="number">0</span>].size();</span><br><span class="line">        <span class="built_in">vector</span>&lt;<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&gt; sum(n + <span class="number">1</span>, <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;(m + <span class="number">1</span>, <span class="number">0</span>));</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; ++i)</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; m; ++j)</span><br><span class="line">                sum[i + <span class="number">1</span>][j + <span class="number">1</span>] = sum[i][j + <span class="number">1</span>] + matrix[i][j];</span><br><span class="line">        <span class="built_in">unordered_map</span>&lt;<span class="keyword">int</span>, <span class="keyword">int</span>&gt; mp;</span><br><span class="line">        <span class="keyword">int</span> ans = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; ++i)&#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = i; j &lt;= n; ++j)&#123;</span><br><span class="line">                mp.clear();</span><br><span class="line">                mp[<span class="number">0</span>] = <span class="number">1</span>;</span><br><span class="line">                <span class="keyword">int</span> ssm = <span class="number">0</span>;</span><br><span class="line">                <span class="keyword">for</span> (<span class="keyword">int</span> k = <span class="number">1</span>; k &lt;= m; ++k)&#123;</span><br><span class="line">                    ssm += sum[j][k] - sum[i - <span class="number">1</span>][k];</span><br><span class="line">                    <span class="keyword">if</span> (mp.count(ssm - target)) </span><br><span class="line">                        ans += mp[ssm - target];</span><br><span class="line">                    <span class="keyword">if</span> (mp.count(ssm))</span><br><span class="line">                        ++mp[ssm];</span><br><span class="line">                    <span class="keyword">else</span> mp[ssm] = <span class="number">1</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> ans;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></p>
<h1 id="1106"><a href="#1106" class="headerlink" title="1106"></a>1106</h1><p>比较简单的一个递归求表达式的值的题目。难度感觉没有 Hard 那种程度，最多是 Normal 把。。。<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="keyword">int</span> n, cur;</span><br><span class="line">    <span class="function"><span class="keyword">bool</span> <span class="title">calc</span><span class="params">(<span class="built_in">string</span>&amp; expr)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="built_in">isalpha</span>(expr[cur])) <span class="keyword">return</span> (expr[cur] == <span class="string">'t'</span> ? <span class="literal">true</span>: <span class="literal">false</span>);</span><br><span class="line">        <span class="keyword">if</span> (expr[cur] == <span class="string">'!'</span>) &#123;</span><br><span class="line">            cur += <span class="number">2</span>;</span><br><span class="line">            <span class="keyword">bool</span> res = !calc(expr);</span><br><span class="line">            ++cur;</span><br><span class="line">            <span class="keyword">return</span> res;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">bool</span> flag = (expr[cur] == <span class="string">'&amp;'</span> ? <span class="literal">true</span>: <span class="literal">false</span>), res = flag;</span><br><span class="line">        <span class="keyword">for</span> (; ; )&#123;</span><br><span class="line">            cur += <span class="number">2</span>;</span><br><span class="line">            <span class="keyword">if</span> (flag)</span><br><span class="line">                res &amp;= calc(expr);</span><br><span class="line">            <span class="keyword">else</span> </span><br><span class="line">                res |= calc(expr);</span><br><span class="line">            <span class="keyword">if</span> (expr[cur + <span class="number">1</span>] == <span class="string">')'</span>)</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        ++cur;</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">bool</span> <span class="title">parseBoolExpr</span><span class="params">(<span class="built_in">string</span> expression)</span> </span>&#123;</span><br><span class="line">        n = expression.length(), cur = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">return</span> calc(expression);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></p>
<h1 id="1147"><a href="#1147" class="headerlink" title="1147"></a>1147</h1><p>直觉上可以贪心，实际上就是贪心。只要能切割就切割。<br>（具体的证明等待补充）<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">longestDecomposition</span><span class="params">(self, text: str)</span> -&gt; int:</span></span><br><span class="line">        <span class="keyword">if</span> text == <span class="string">""</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">        len1 = len(text) // <span class="number">2</span></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">1</span>, len1 + <span class="number">1</span>):</span><br><span class="line">            <span class="keyword">if</span> text[<span class="number">0</span>: i] == text[-i: ]:</span><br><span class="line">                <span class="keyword">return</span> self.longestDecomposition(text[i: -i]) + <span class="number">2</span></span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span></span><br></pre></td></tr></table></figure></p>
<h1 id="1153"><a href="#1153" class="headerlink" title="1153"></a>1153</h1><p>很难让人在有限的样例下把握关键的题目。（比赛时我 WA 了 5 次，全靠 WA 出来的样例找出规律）<br>首先基本的，把每一个字符的映射找出来。然后是关键，答案是 true 的充要条件是下面两个的逻辑或：</p>
<ol>
<li>存在某个字符，它没有出现在 str1 中。这表明了某些字符可以将其作为中转站，从而变化成为别的字符。</li>
<li>不存在某个环（自环不算），使得只有通过环上面的点才能进入到该环内。也就是说，没有某个入度为 0 的点能到达该环。</li>
</ol>
<p>第二个条件有些奇怪，可以这么想：如果第一个条件成立，那么即使存在这样的环也可以通过某个空余字符将环拆解。（考虑 str1=”ab”, str2=”ba”）第一个条件不成立，而第二个条件也不成立的话，那么对于这样的环，其上面的字符必须沿着某一方向逐步映射，而这样必然会丢失起始的字符。<br>如果第二个条件成立，第一个条件不成立也好办。这一步可以试着画个图理解一下。<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">bool</span> <span class="title">canConvert</span><span class="params">(<span class="built_in">string</span> str1, <span class="built_in">string</span> str2)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> l1 = str1.length(), l2 = str2.length();</span><br><span class="line">        <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; mp(<span class="number">26</span>, <span class="number">-1</span>);</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; l1; )&#123;</span><br><span class="line">            <span class="keyword">int</span> j = i, j2 = i;</span><br><span class="line">            <span class="keyword">while</span> (j &lt; l1 &amp;&amp; str1[i] == str1[j]) ++j;</span><br><span class="line">            <span class="keyword">while</span> (j2 &lt; l2 &amp;&amp; str2[i] == str2[j2]) ++j2;</span><br><span class="line">            <span class="keyword">if</span> (j2 &lt; j) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">            <span class="keyword">if</span> (mp[str1[i] - <span class="string">'a'</span>] &lt; <span class="number">0</span>) mp[str1[i] - <span class="string">'a'</span>] = str2[i] - <span class="string">'a'</span>;</span><br><span class="line">            <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="keyword">if</span> (mp[str1[i] - <span class="string">'a'</span>] != str2[i] - <span class="string">'a'</span>)</span><br><span class="line">                    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            i = j;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">int</span> occ = <span class="number">0</span>, cnt = <span class="number">26</span>;</span><br><span class="line">        <span class="keyword">int</span> deg[<span class="number">26</span>] = &#123;<span class="number">0</span>&#125;;</span><br><span class="line">        <span class="keyword">bool</span> vis[<span class="number">26</span>] = &#123;<span class="number">0</span>&#125;;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">26</span>; ++i)&#123;</span><br><span class="line">            <span class="keyword">if</span> (mp[i] &lt; <span class="number">0</span>) ++occ;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span> (mp[i] == i) mp[i] = <span class="number">-1</span>;</span><br><span class="line">            <span class="keyword">else</span> ++deg[mp[i]];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">26</span>; ++i)&#123;</span><br><span class="line">            <span class="keyword">if</span> (deg[i]) <span class="keyword">continue</span>;</span><br><span class="line">            <span class="keyword">int</span> tp = i;</span><br><span class="line">            --cnt, vis[tp] = <span class="literal">true</span>;</span><br><span class="line">            <span class="keyword">while</span> (mp[tp] &gt;= <span class="number">0</span>)&#123;<span class="comment">// 沿着环走</span></span><br><span class="line">                <span class="keyword">if</span> (vis[mp[tp]]) <span class="keyword">break</span>;</span><br><span class="line">                --cnt, vis[mp[tp]] = <span class="literal">true</span>, tp = mp[tp];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> occ || cnt == <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></p>
<h1 id="1157"><a href="#1157" class="headerlink" title="1157"></a>1157</h1><p>python 暴力居然卡了过去。。。<br>这可能是一个失误，因为比赛的时候是小数据（最多 500 次询问），而在正式题目中变成了 10000。</p>
<p>其实这道题就是区间众数，这个问题有很多种解法，下面给出一些解法。</p>
<h1 id="1163"><a href="#1163" class="headerlink" title="1163"></a>1163</h1><p>后缀数组裸题，找最大后缀。<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">char</span> r[<span class="number">100005</span>];</span><br><span class="line"><span class="keyword">int</span> sa[<span class="number">100005</span>], wa[<span class="number">100005</span>], wb[<span class="number">100005</span>], wv[<span class="number">100005</span>], cnt[<span class="number">100005</span>] = &#123;<span class="number">0</span>&#125;;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">cmp</span><span class="params">(<span class="keyword">int</span> *r, <span class="keyword">int</span> a, <span class="keyword">int</span> b, <span class="keyword">int</span> l)</span></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> r[a] == r[b] &amp;&amp; r[a + l] == r[b + l];</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">build_sa</span><span class="params">(<span class="keyword">char</span> *r, <span class="keyword">int</span> *sa, <span class="keyword">int</span> n, <span class="keyword">int</span> m)</span></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> i, j, p, *x = wa, *y = wb;</span><br><span class="line">    <span class="keyword">for</span>(i = <span class="number">0</span>; i &lt; m; ++i) cnt[i]=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(i = <span class="number">0</span>; i &lt; n; ++i) cnt[x[i] = r[i]]++;</span><br><span class="line">    <span class="keyword">for</span>(i = <span class="number">1</span>; i &lt; m; ++i) cnt[i] += cnt[i - <span class="number">1</span>];</span><br><span class="line">    <span class="keyword">for</span>(i = n - <span class="number">1</span>; i &gt;= <span class="number">0</span>; --i) sa[--cnt[x[i]]] = i;</span><br><span class="line">    <span class="keyword">for</span>(j = <span class="number">1</span>, p = <span class="number">1</span>; p &lt; n; j &lt;&lt;= <span class="number">1</span>, m = p)&#123;</span><br><span class="line">        <span class="keyword">for</span>(p = <span class="number">0</span>, i = n - j; i &lt; n; ++i) y[p++] = i;</span><br><span class="line">        <span class="keyword">for</span>(i = <span class="number">0</span>; i &lt; n; ++i) <span class="keyword">if</span>(sa[i] - j &gt;= <span class="number">0</span>) y[p++] = sa[i] - j;</span><br><span class="line">        <span class="keyword">for</span>(i = <span class="number">0</span>; i &lt; n; ++i) wv[i] = x[y[i]];</span><br><span class="line">        <span class="keyword">for</span>(i = <span class="number">0</span>; i &lt; m; ++i) cnt[i] = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(i = <span class="number">0</span>; i &lt; n; ++i) cnt[wv[i]]++;</span><br><span class="line">        <span class="keyword">for</span>(i = <span class="number">1</span>; i &lt; m; ++i) cnt[i] += cnt[i - <span class="number">1</span>];</span><br><span class="line">        <span class="keyword">for</span>(i = n - <span class="number">1</span>; i &gt;= <span class="number">0</span>; --i) sa[--cnt[wv[i]]] = y[i];</span><br><span class="line">        swap(x, y);</span><br><span class="line">        <span class="keyword">for</span>(p = <span class="number">1</span>, x[sa[<span class="number">0</span>]] = <span class="number">0</span>, i = <span class="number">1</span>; i &lt; n; ++i)</span><br><span class="line">            x[sa[i]] = cmp(y, sa[i - <span class="number">1</span>], sa[i], j) ? p - <span class="number">1</span>: p++;		</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="built_in">string</span> <span class="title">lastSubstring</span><span class="params">(<span class="built_in">string</span> s)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> l = s.length();</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; l; ++i) </span><br><span class="line">            r[i] = s[i] - <span class="string">'a'</span> + <span class="number">1</span>;</span><br><span class="line">        r[l] = <span class="number">0</span>;</span><br><span class="line">        build_sa(r, sa, l + <span class="number">1</span>, <span class="number">26</span> + <span class="number">1</span>);</span><br><span class="line">        <span class="keyword">return</span> s.substr(sa[l]);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></p>

      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2019/04/23/uva836/" rel="next" title="UVa836 Largest Submatrix">
                <i class="fa fa-chevron-left"></i> UVa836 Largest Submatrix
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2019/05/17/contest-cf1167/" rel="prev" title="Educational Codeforces Round 65 题解">
                Educational Codeforces Round 65 题解 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          

  
    <div class="comments" id="comments">
    </div>

  


        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">zqy</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">259</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">26</span>
                  <span class="site-state-item-name">分类</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">85</span>
                  <span class="site-state-item-name">标签</span>
                </a>
              </div>
            

          </nav>

          

          

          
          

          
          
            <div class="links-of-blogroll motion-element links-of-blogroll-block">
              <div class="links-of-blogroll-title">
                <i class="fa  fa-fw fa-link"></i>
                Links
              </div>
              <ul class="links-of-blogroll-list">
                
                  <li class="links-of-blogroll-item">
                    <a href="http://hodam.top" title="big_yellow_doge" target="_blank">big_yellow_doge</a>
                  </li>
                
              </ul>
            </div>
          

          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#4"><span class="nav-number">1.</span> <span class="nav-text">4</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#10"><span class="nav-number">2.</span> <span class="nav-text">10</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#23"><span class="nav-number">3.</span> <span class="nav-text">23</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#25"><span class="nav-number">4.</span> <span class="nav-text">25</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#30"><span class="nav-number">5.</span> <span class="nav-text">30</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#方法一"><span class="nav-number">5.1.</span> <span class="nav-text">方法一</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#方法二"><span class="nav-number">5.2.</span> <span class="nav-text">方法二</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#方法三"><span class="nav-number">5.3.</span> <span class="nav-text">方法三</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#32"><span class="nav-number">6.</span> <span class="nav-text">32</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#37"><span class="nav-number">7.</span> <span class="nav-text">37</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#方法一-1"><span class="nav-number">7.1.</span> <span class="nav-text">方法一</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#方法二-1"><span class="nav-number">7.2.</span> <span class="nav-text">方法二</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#41"><span class="nav-number">8.</span> <span class="nav-text">41</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#42"><span class="nav-number">9.</span> <span class="nav-text">42</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#44"><span class="nav-number">10.</span> <span class="nav-text">44</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#方法一-2"><span class="nav-number">10.1.</span> <span class="nav-text">方法一</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#方法二-2"><span class="nav-number">10.2.</span> <span class="nav-text">方法二</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#45"><span class="nav-number">11.</span> <span class="nav-text">45</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#51"><span class="nav-number">12.</span> <span class="nav-text">51</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#52"><span class="nav-number">13.</span> <span class="nav-text">52</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#57"><span class="nav-number">14.</span> <span class="nav-text">57</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#65"><span class="nav-number">15.</span> <span class="nav-text">65</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#68"><span class="nav-number">16.</span> <span class="nav-text">68</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#72"><span class="nav-number">17.</span> <span class="nav-text">72</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#76"><span class="nav-number">18.</span> <span class="nav-text">76</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#84"><span class="nav-number">19.</span> <span class="nav-text">84</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#85"><span class="nav-number">20.</span> <span class="nav-text">85</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#87"><span class="nav-number">21.</span> <span class="nav-text">87</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#97"><span class="nav-number">22.</span> <span class="nav-text">97</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#99"><span class="nav-number">23.</span> <span class="nav-text">99</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#115"><span class="nav-number">24.</span> <span class="nav-text">115</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#123"><span class="nav-number">25.</span> <span class="nav-text">123</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#124"><span class="nav-number">26.</span> <span class="nav-text">124</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#128"><span class="nav-number">27.</span> <span class="nav-text">128</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#132"><span class="nav-number">28.</span> <span class="nav-text">132</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#135"><span class="nav-number">29.</span> <span class="nav-text">135</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#140"><span class="nav-number">30.</span> <span class="nav-text">140</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#145"><span class="nav-number">31.</span> <span class="nav-text">145</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#149"><span class="nav-number">32.</span> <span class="nav-text">149</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#164"><span class="nav-number">33.</span> <span class="nav-text">164</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#174"><span class="nav-number">34.</span> <span class="nav-text">174</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#188"><span class="nav-number">35.</span> <span class="nav-text">188</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#212"><span class="nav-number">36.</span> <span class="nav-text">212</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#214"><span class="nav-number">37.</span> <span class="nav-text">214</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#224"><span class="nav-number">38.</span> <span class="nav-text">224</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#295"><span class="nav-number">39.</span> <span class="nav-text">295</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#297"><span class="nav-number">40.</span> <span class="nav-text">297</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#312"><span class="nav-number">41.</span> <span class="nav-text">312</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#327"><span class="nav-number">42.</span> <span class="nav-text">327</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#329"><span class="nav-number">43.</span> <span class="nav-text">329</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#336"><span class="nav-number">44.</span> <span class="nav-text">336</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#方法一-3"><span class="nav-number">44.1.</span> <span class="nav-text">方法一</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#方法二-3"><span class="nav-number">44.2.</span> <span class="nav-text">方法二</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#354"><span class="nav-number">45.</span> <span class="nav-text">354</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#方法一-4"><span class="nav-number">45.1.</span> <span class="nav-text">方法一</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#方法二-4"><span class="nav-number">45.2.</span> <span class="nav-text">方法二</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#363"><span class="nav-number">46.</span> <span class="nav-text">363</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#483"><span class="nav-number">47.</span> <span class="nav-text">483</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#552"><span class="nav-number">48.</span> <span class="nav-text">552</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#632"><span class="nav-number">49.</span> <span class="nav-text">632</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#689"><span class="nav-number">50.</span> <span class="nav-text">689</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#786"><span class="nav-number">51.</span> <span class="nav-text">786</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#793"><span class="nav-number">52.</span> <span class="nav-text">793</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#805"><span class="nav-number">53.</span> <span class="nav-text">805</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#方法一-5"><span class="nav-number">53.1.</span> <span class="nav-text">方法一</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#方法二-5"><span class="nav-number">53.2.</span> <span class="nav-text">方法二</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#810"><span class="nav-number">54.</span> <span class="nav-text">810</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#827"><span class="nav-number">55.</span> <span class="nav-text">827</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#854"><span class="nav-number">56.</span> <span class="nav-text">854</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#862"><span class="nav-number">57.</span> <span class="nav-text">862</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#878"><span class="nav-number">58.</span> <span class="nav-text">878</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#895"><span class="nav-number">59.</span> <span class="nav-text">895</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#982"><span class="nav-number">60.</span> <span class="nav-text">982</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#995"><span class="nav-number">61.</span> <span class="nav-text">995</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#996"><span class="nav-number">62.</span> <span class="nav-text">996</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#1000"><span class="nav-number">63.</span> <span class="nav-text">1000</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#1074"><span class="nav-number">64.</span> <span class="nav-text">1074</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#1106"><span class="nav-number">65.</span> <span class="nav-text">1106</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#1147"><span class="nav-number">66.</span> <span class="nav-text">1147</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#1153"><span class="nav-number">67.</span> <span class="nav-text">1153</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#1157"><span class="nav-number">68.</span> <span class="nav-text">1157</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#1163"><span class="nav-number">69.</span> <span class="nav-text">1163</span></a></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2019</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">zqy</span>

  
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-area-chart"></i>
    </span>
    
      <span class="post-meta-item-text">Site words total count&#58;</span>
    
    <span title="Site words total count">229.5k</span>
  
</div>


  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Mist</a> v5.1.4</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  

  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.4"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.4"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  










  <script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
  <script src="//unpkg.com/valine/dist/Valine.min.js"></script>
  
  <script type="text/javascript">
    var GUEST = ['nick','mail','link'];
    var guest = 'nick,mail,link';
    guest = guest.split(',').filter(item=>{
      return GUEST.indexOf(item)>-1;
    });
    new Valine({
        el: '#comments' ,
        verify: false,
        notify: false,
        appId: 'X4PSdvLViY4pfjyqvDEkpvIN-gzGzoHsz',
        appKey: 'IR3NlAjCwyRMypA2bbGW5GC1',
        placeholder: 'Write something?',
        avatar:'mm',
        guest_info:guest,
        pageSize:'10' || 10,
    });
  </script>



  

  <script type="text/javascript">
    // Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (/json$/i.test(search_path)) {
      isXml = false;
    }
    var path = "/" + search_path;
    // monitor main search box;

    var onPopupClose = function (e) {
      $('.popup').hide();
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.search-popup-overlay').click(onPopupClose);
      $('.popup').toggle();
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }

    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';

      // start loading animation
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay">' +
          '<div id="search-loading-icon">' +
          '<i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>' +
          '</div>' +
          '</div>')
        .css('overflow', 'hidden');
      $("#search-loading-icon").css('margin', '20% auto 0 auto').css('text-align', 'center');

      $.ajax({
        url: path,
        dataType: isXml ? "xml" : "json",
        async: true,
        success: function(res) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = isXml ? $("entry", res).map(function() {
            return {
              title: $("title", this).text(),
              content: $("content",this).text(),
              url: $("url" , this).text()
            };
          }).get() : res;
          var input = document.getElementById(search_id);
          var resultContent = document.getElementById(content_id);
          var inputEventFunction = function() {
            var searchText = input.value.trim().toLowerCase();
            var keywords = searchText.split(/[\s\-]+/);
            if (keywords.length > 1) {
              keywords.push(searchText);
            }
            var resultItems = [];
            if (searchText.length > 0) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var hitCount = 0;
                var searchTextCount = 0;
                var title = data.title.trim();
                var titleInLowerCase = title.toLowerCase();
                var content = data.content.trim().replace(/<[^>]+>/g,"");
                var contentInLowerCase = content.toLowerCase();
                var articleUrl = decodeURIComponent(data.url);
                var indexOfTitle = [];
                var indexOfContent = [];
                // only match articles with not empty titles
                if(title != '') {
                  keywords.forEach(function(keyword) {
                    function getIndexByWord(word, text, caseSensitive) {
                      var wordLen = word.length;
                      if (wordLen === 0) {
                        return [];
                      }
                      var startPosition = 0, position = [], index = [];
                      if (!caseSensitive) {
                        text = text.toLowerCase();
                        word = word.toLowerCase();
                      }
                      while ((position = text.indexOf(word, startPosition)) > -1) {
                        index.push({position: position, word: word});
                        startPosition = position + wordLen;
                      }
                      return index;
                    }

                    indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
                    indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
                  });
                  if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
                    isMatch = true;
                    hitCount = indexOfTitle.length + indexOfContent.length;
                  }
                }

                // show search results

                if (isMatch) {
                  // sort index by position of keyword

                  [indexOfTitle, indexOfContent].forEach(function (index) {
                    index.sort(function (itemLeft, itemRight) {
                      if (itemRight.position !== itemLeft.position) {
                        return itemRight.position - itemLeft.position;
                      } else {
                        return itemLeft.word.length - itemRight.word.length;
                      }
                    });
                  });

                  // merge hits into slices

                  function mergeIntoSlice(text, start, end, index) {
                    var item = index[index.length - 1];
                    var position = item.position;
                    var word = item.word;
                    var hits = [];
                    var searchTextCountInSlice = 0;
                    while (position + word.length <= end && index.length != 0) {
                      if (word === searchText) {
                        searchTextCountInSlice++;
                      }
                      hits.push({position: position, length: word.length});
                      var wordEnd = position + word.length;

                      // move to next position of hit

                      index.pop();
                      while (index.length != 0) {
                        item = index[index.length - 1];
                        position = item.position;
                        word = item.word;
                        if (wordEnd > position) {
                          index.pop();
                        } else {
                          break;
                        }
                      }
                    }
                    searchTextCount += searchTextCountInSlice;
                    return {
                      hits: hits,
                      start: start,
                      end: end,
                      searchTextCount: searchTextCountInSlice
                    };
                  }

                  var slicesOfTitle = [];
                  if (indexOfTitle.length != 0) {
                    slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
                  }

                  var slicesOfContent = [];
                  while (indexOfContent.length != 0) {
                    var item = indexOfContent[indexOfContent.length - 1];
                    var position = item.position;
                    var word = item.word;
                    // cut out 100 characters
                    var start = position - 20;
                    var end = position + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if (end < position + word.length) {
                      end = position + word.length;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
                  }

                  // sort slices in content by search text's count and hits' count

                  slicesOfContent.sort(function (sliceLeft, sliceRight) {
                    if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                      return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                    } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                      return sliceRight.hits.length - sliceLeft.hits.length;
                    } else {
                      return sliceLeft.start - sliceRight.start;
                    }
                  });

                  // select top N slices in content

                  var upperBound = parseInt('1');
                  if (upperBound >= 0) {
                    slicesOfContent = slicesOfContent.slice(0, upperBound);
                  }

                  // highlight title and content

                  function highlightKeyword(text, slice) {
                    var result = '';
                    var prevEnd = slice.start;
                    slice.hits.forEach(function (hit) {
                      result += text.substring(prevEnd, hit.position);
                      var end = hit.position + hit.length;
                      result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                      prevEnd = end;
                    });
                    result += text.substring(prevEnd, slice.end);
                    return result;
                  }

                  var resultItem = '';

                  if (slicesOfTitle.length != 0) {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>";
                  } else {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + title + "</a>";
                  }

                  slicesOfContent.forEach(function (slice) {
                    resultItem += "<a href='" + articleUrl + "'>" +
                      "<p class=\"search-result\">" + highlightKeyword(content, slice) +
                      "...</p>" + "</a>";
                  });

                  resultItem += "</li>";
                  resultItems.push({
                    item: resultItem,
                    searchTextCount: searchTextCount,
                    hitCount: hitCount,
                    id: resultItems.length
                  });
                }
              })
            };
            if (keywords.length === 1 && keywords[0] === "") {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-search fa-5x" /></div>'
            } else if (resultItems.length === 0) {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>'
            } else {
              resultItems.sort(function (resultLeft, resultRight) {
                if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
                  return resultRight.searchTextCount - resultLeft.searchTextCount;
                } else if (resultLeft.hitCount !== resultRight.hitCount) {
                  return resultRight.hitCount - resultLeft.hitCount;
                } else {
                  return resultRight.id - resultLeft.id;
                }
              });
              var searchResultList = '<ul class=\"search-result-list\">';
              resultItems.forEach(function (result) {
                searchResultList += result.item;
              })
              searchResultList += "</ul>";
              resultContent.innerHTML = searchResultList;
            }
          }

          if ('auto' === 'auto') {
            input.addEventListener('input', inputEventFunction);
          } else {
            $('.search-icon').click(inputEventFunction);
            input.addEventListener('keypress', function (event) {
              if (event.keyCode === 13) {
                inputEventFunction();
              }
            });
          }

          // remove loading animation
          $(".local-search-pop-overlay").remove();
          $('body').css('overflow', '');

          proceedsearch();
        }
      });
    }

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function(e){
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 &&
        $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });
  </script>





  

  
  <script src="https://cdn1.lncld.net/static/js/av-core-mini-0.6.4.js"></script>
  <script>AV.initialize("Q3MTYoDUCrhHUXOabd91DbOM-gzGzoHsz", "rghJaSuameCOIla10btdkgPd");</script>
  <script>
    function showTime(Counter) {
      var query = new AV.Query(Counter);
      var entries = [];
      var $visitors = $(".leancloud_visitors");

      $visitors.each(function () {
        entries.push( $(this).attr("id").trim() );
      });

      query.containedIn('url', entries);
      query.find()
        .done(function (results) {
          var COUNT_CONTAINER_REF = '.leancloud-visitors-count';

          if (results.length === 0) {
            $visitors.find(COUNT_CONTAINER_REF).text(0);
            return;
          }

          for (var i = 0; i < results.length; i++) {
            var item = results[i];
            var url = item.get('url');
            var time = item.get('time');
            var element = document.getElementById(url);

            $(element).find(COUNT_CONTAINER_REF).text(time);
          }
          for(var i = 0; i < entries.length; i++) {
            var url = entries[i];
            var element = document.getElementById(url);
            var countSpan = $(element).find(COUNT_CONTAINER_REF);
            if( countSpan.text() == '') {
              countSpan.text(0);
            }
          }
        })
        .fail(function (object, error) {
          console.log("Error: " + error.code + " " + error.message);
        });
    }

    function addCount(Counter) {
      var $visitors = $(".leancloud_visitors");
      var url = $visitors.attr('id').trim();
      var title = $visitors.attr('data-flag-title').trim();
      var query = new AV.Query(Counter);

      query.equalTo("url", url);
      query.find({
        success: function(results) {
          if (results.length > 0) {
            var counter = results[0];
            counter.fetchWhenSave(true);
            counter.increment("time");
            counter.save(null, {
              success: function(counter) {
                var $element = $(document.getElementById(url));
                $element.find('.leancloud-visitors-count').text(counter.get('time'));
              },
              error: function(counter, error) {
                console.log('Failed to save Visitor num, with error message: ' + error.message);
              }
            });
          } else {
            var newcounter = new Counter();
            /* Set ACL */
            var acl = new AV.ACL();
            acl.setPublicReadAccess(true);
            acl.setPublicWriteAccess(true);
            newcounter.setACL(acl);
            /* End Set ACL */
            newcounter.set("title", title);
            newcounter.set("url", url);
            newcounter.set("time", 1);
            newcounter.save(null, {
              success: function(newcounter) {
                var $element = $(document.getElementById(url));
                $element.find('.leancloud-visitors-count').text(newcounter.get('time'));
              },
              error: function(newcounter, error) {
                console.log('Failed to create');
              }
            });
          }
        },
        error: function(error) {
          console.log('Error:' + error.code + " " + error.message);
        }
      });
    }

    $(function() {
      var Counter = AV.Object.extend("Counter");
      if ($('.leancloud_visitors').length == 1) {
        addCount(Counter);
      } else if ($('.post-title-link').length > 1) {
        showTime(Counter);
      }
    });
  </script>



  

  

  
  

  
  
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        tex2jax: {
          inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
          processEscapes: true,
          skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
        }
      });
    </script>

    <script type="text/x-mathjax-config">
      MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for (i=0; i < all.length; i += 1) {
          all[i].SourceElement().parentNode.className += ' has-jax';
        }
      });
    </script>
    <script type="text/javascript" src="//cdn.bootcss.com/mathjax/2.7.1/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
  


  

  

</body>
</html>
